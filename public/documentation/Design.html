<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>Class: Design</title>

<link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script type="text/javascript" charset="utf-8" src="./js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="./index.html">Home</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>app/models/design.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link">ActiveRecord::Base
  
</nav>

    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-c-bom_upload_data">::bom_upload_data</a>
    
    <li><a href="#method-c-find_all_active">::find_all_active</a>
    
    <li><a href="#method-c-get_active_designs">::get_active_designs</a>
    
    <li><a href="#method-c-get_active_designs_owned_by">::get_active_designs_owned_by</a>
    
    <li><a href="#method-c-get_unique_pcb_numbers">::get_unique_pcb_numbers</a>
    
    <li><a href="#method-c-http_object">::http_object</a>
    
    <li><a href="#method-i-admin_updates">#admin_updates</a>
    
    <li><a href="#method-i-all_assignments">#all_assignments</a>
    
    <li><a href="#method-i-all_reviewers">#all_reviewers</a>
    
    <li><a href="#method-i-assignment_count">#assignment_count</a>
    
    <li><a href="#method-i-assignments_complete-3F">#assignments_complete?</a>
    
    <li><a href="#method-i-audit_type">#audit_type</a>
    
    <li><a href="#method-i-belongs_to">#belongs_to</a>
    
    <li><a href="#method-i-comments_by_role">#comments_by_role</a>
    
    <li><a href="#method-i-complete-3F">#complete?</a>
    
    <li><a href="#method-i-completed_assignment_count">#completed_assignment_count</a>
    
    <li><a href="#method-i-date_code-3F">#date_code?</a>
    
    <li><a href="#method-i-designer">#designer</a>
    
    <li><a href="#method-i-detailed_name">#detailed_name</a>
    
    <li><a href="#method-i-directory_name">#directory_name</a>
    
    <li><a href="#method-i-display_summary">#display_summary</a>
    
    <li><a href="#method-i-dot_rev-3F">#dot_rev?</a>
    
    <li><a href="#method-i-flip_design_type">#flip_design_type</a>
    
    <li><a href="#method-i-get_associated_users">#get_associated_users</a>
    
    <li><a href="#method-i-get_associated_users_by_role">#get_associated_users_by_role</a>
    
    <li><a href="#method-i-get_design_review">#get_design_review</a>
    
    <li><a href="#method-i-get_mail_lists">#get_mail_lists</a>
    
    <li><a href="#method-i-get_phase_design_review">#get_phase_design_review</a>
    
    <li><a href="#method-i-get_role_reviewer">#get_role_reviewer</a>
    
    <li><a href="#method-i-get_role_reviewers">#get_role_reviewers</a>
    
    <li><a href="#method-i-have_assignments">#have_assignments</a>
    
    <li><a href="#method-i-in_phase-3F">#in_phase?</a>
    
    <li><a href="#method-i-inactive_reviewers-3F">#inactive_reviewers?</a>
    
    <li><a href="#method-i-increment_review">#increment_review</a>
    
    <li><a href="#method-i-input_gate">#input_gate</a>
    
    <li><a href="#method-i-is_active-3F">#is_active?</a>
    
    <li><a href="#method-i-is_role_reviewer-3F">#is_role_reviewer?</a>
    
    <li><a href="#method-i-modification_comment">#modification_comment</a>
    
    <li><a href="#method-i-my_assignments">#my_assignments</a>
    
    <li><a href="#method-i-name">#name</a>
    
    <li><a href="#method-i-new-3F">#new?</a>
    
    <li><a href="#method-i-next_review">#next_review</a>
    
    <li><a href="#method-i-pcb_display">#pcb_display</a>
    
    <li><a href="#method-i-pcb_number">#pcb_number</a>
    
    <li><a href="#method-i-pcb_number-3F">#pcb_number?</a>
    
    <li><a href="#method-i-pcb_rev">#pcb_rev</a>
    
    <li><a href="#method-i-pcbas_string">#pcbas_string</a>
    
    <li><a href="#method-i-peer">#peer</a>
    
    <li><a href="#method-i-phase">#phase</a>
    
    <li><a href="#method-i-pnemonic_based_name">#pnemonic_based_name</a>
    
    <li><a href="#method-i-priority_name">#priority_name</a>
    
    <li><a href="#method-i-record_update">#record_update</a>
    
    <li><a href="#method-i-report_card_count">#report_card_count</a>
    
    <li><a href="#method-i-report_cards_complete-3F">#report_cards_complete?</a>
    
    <li><a href="#method-i-reviewers">#reviewers</a>
    
    <li><a href="#method-i-reviewers_remaining_reviews">#reviewers_remaining_reviews</a>
    
    <li><a href="#method-i-role_open_review_count">#role_open_review_count</a>
    
    <li><a href="#method-i-role_review_count">#role_review_count</a>
    
    <li><a href="#method-i-set_design_center">#set_design_center</a>
    
    <li><a href="#method-i-set_reviewer">#set_reviewer</a>
    
    <li><a href="#method-i-set_role_reviewer">#set_role_reviewer</a>
    
    <li><a href="#method-i-setup_design_reviews">#setup_design_reviews</a>
    
    <li><a href="#method-i-subject_prefix">#subject_prefix</a>
    
    <li><a href="#method-i-surfboards_path">#surfboards_path</a>
    
    <li><a href="#method-i-total_approved_schedule_change_count">#total_approved_schedule_change_count</a>
    
    <li><a href="#method-i-total_approved_schedule_changes-3F">#total_approved_schedule_changes?</a>
    
    <li><a href="#method-i-total_approved_schedule_impact_hours">#total_approved_schedule_impact_hours</a>
    
    <li><a href="#method-i-total_pending_schedule_change_count">#total_pending_schedule_change_count</a>
    
    <li><a href="#method-i-total_pending_schedule_changes-3F">#total_pending_schedule_changes?</a>
    
    <li><a href="#method-i-total_pending_schedule_impact_hours">#total_pending_schedule_impact_hours</a>
    
    <li><a href="#method-i-update_valor_reviewer">#update_valor_reviewer</a>
    
    <li><a href="#method-i-work_assignments_complete-3F">#work_assignments_complete?</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="./doc/README_FOR_APP.html">README_FOR_APP</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="./AdminController.html">AdminController</a>
  
    <li><a href="./ApplicationController.html">ApplicationController</a>
  
    <li><a href="./ApplicationHelper.html">ApplicationHelper</a>
  
    <li><a href="./Audit.html">Audit</a>
  
    <li><a href="./AuditComment.html">AuditComment</a>
  
    <li><a href="./AuditController.html">AuditController</a>
  
    <li><a href="./AuditMailer.html">AuditMailer</a>
  
    <li><a href="./AuditTeammate.html">AuditTeammate</a>
  
    <li><a href="./Board.html">Board</a>
  
    <li><a href="./BoardController.html">BoardController</a>
  
    <li><a href="./BoardDesignEntry.html">BoardDesignEntry</a>
  
    <li><a href="./BoardDesignEntryController.html">BoardDesignEntryController</a>
  
    <li><a href="./BoardDesignEntryMailer.html">BoardDesignEntryMailer</a>
  
    <li><a href="./BoardDesignEntryUser.html">BoardDesignEntryUser</a>
  
    <li><a href="./BoardHelper.html">BoardHelper</a>
  
    <li><a href="./BoardReviewer.html">BoardReviewer</a>
  
    <li><a href="./CcListHistory.html">CcListHistory</a>
  
    <li><a href="./ChangeClass.html">ChangeClass</a>
  
    <li><a href="./ChangeClassesController.html">ChangeClassesController</a>
  
    <li><a href="./ChangeDetail.html">ChangeDetail</a>
  
    <li><a href="./ChangeDetailsController.html">ChangeDetailsController</a>
  
    <li><a href="./ChangeItem.html">ChangeItem</a>
  
    <li><a href="./ChangeItemsController.html">ChangeItemsController</a>
  
    <li><a href="./ChangeType.html">ChangeType</a>
  
    <li><a href="./ChangeTypesController.html">ChangeTypesController</a>
  
    <li><a href="./Check.html">Check</a>
  
    <li><a href="./CheckController.html">CheckController</a>
  
    <li><a href="./Checklist.html">Checklist</a>
  
    <li><a href="./ChecklistController.html">ChecklistController</a>
  
    <li><a href="./ChecklistHelper.html">ChecklistHelper</a>
  
    <li><a href="./CoreExtensions.html">CoreExtensions</a>
  
    <li><a href="./DbCheck.html">DbCheck</a>
  
    <li><a href="./DebugController.html">DebugController</a>
  
    <li><a href="./DebugHelper.html">DebugHelper</a>
  
    <li><a href="./Design.html">Design</a>
  
    <li><a href="./DesignCenter.html">DesignCenter</a>
  
    <li><a href="./DesignCenterController.html">DesignCenterController</a>
  
    <li><a href="./DesignCenterManagerController.html">DesignCenterManagerController</a>
  
    <li><a href="./DesignChange.html">DesignChange</a>
  
    <li><a href="./DesignChangesController.html">DesignChangesController</a>
  
    <li><a href="./DesignChangesHelper.html">DesignChangesHelper</a>
  
    <li><a href="./DesignCheck.html">DesignCheck</a>
  
    <li><a href="./DesignController.html">DesignController</a>
  
    <li><a href="./DesignDirectory.html">DesignDirectory</a>
  
    <li><a href="./DesignDirectoryController.html">DesignDirectoryController</a>
  
    <li><a href="./DesignPcbasHelper.html">DesignPcbasHelper</a>
  
    <li><a href="./DesignReview.html">DesignReview</a>
  
    <li><a href="./DesignReviewComment.html">DesignReviewComment</a>
  
    <li><a href="./DesignReviewController.html">DesignReviewController</a>
  
    <li><a href="./DesignReviewDocument.html">DesignReviewDocument</a>
  
    <li><a href="./DesignReviewHelper.html">DesignReviewHelper</a>
  
    <li><a href="./DesignReviewMailer.html">DesignReviewMailer</a>
  
    <li><a href="./DesignReviewResult.html">DesignReviewResult</a>
  
    <li><a href="./DesignReviewResultController.html">DesignReviewResultController</a>
  
    <li><a href="./DesignUpdate.html">DesignUpdate</a>
  
    <li><a href="./DesignUpdateController.html">DesignUpdateController</a>
  
    <li><a href="./Division.html">Division</a>
  
    <li><a href="./DivisionController.html">DivisionController</a>
  
    <li><a href="./Document.html">Document</a>
  
    <li><a href="./DocumentController.html">DocumentController</a>
  
    <li><a href="./DocumentMailer.html">DocumentMailer</a>
  
    <li><a href="./DocumentType.html">DocumentType</a>
  
    <li><a href="./DocumentTypeController.html">DocumentTypeController</a>
  
    <li><a href="./EcoComment.html">EcoComment</a>
  
    <li><a href="./EcoDocument.html">EcoDocument</a>
  
    <li><a href="./EcoDocumentsController.html">EcoDocumentsController</a>
  
    <li><a href="./EcoTask.html">EcoTask</a>
  
    <li><a href="./EcoTaskMailer.html">EcoTaskMailer</a>
  
    <li><a href="./EcoTaskReportsController.html">EcoTaskReportsController</a>
  
    <li><a href="./EcoTasksController.html">EcoTasksController</a>
  
    <li><a href="./EcoType.html">EcoType</a>
  
    <li><a href="./FabHouse.html">FabHouse</a>
  
    <li><a href="./FabHouseController.html">FabHouseController</a>
  
    <li><a href="./FtpNotification.html">FtpNotification</a>
  
    <li><a href="./IncomingDirectory.html">IncomingDirectory</a>
  
    <li><a href="./IncomingDirectoryController.html">IncomingDirectoryController</a>
  
    <li><a href="./IpdPost.html">IpdPost</a>
  
    <li><a href="./IpdPostHelper.html">IpdPostHelper</a>
  
    <li><a href="./Location.html">Location</a>
  
    <li><a href="./LocationController.html">LocationController</a>
  
    <li><a href="./LoginSystem.html">LoginSystem</a>
  
    <li><a href="./MailerMethods.html">MailerMethods</a>
  
    <li><a href="./OiAssignment.html">OiAssignment</a>
  
    <li><a href="./OiAssignmentComment.html">OiAssignmentComment</a>
  
    <li><a href="./OiAssignmentReport.html">OiAssignmentReport</a>
  
    <li><a href="./OiCategory.html">OiCategory</a>
  
    <li><a href="./OiCategorySection.html">OiCategorySection</a>
  
    <li><a href="./OiInstruction.html">OiInstruction</a>
  
    <li><a href="./OiInstructionController.html">OiInstructionController</a>
  
    <li><a href="./OiInstructionHelper.html">OiInstructionHelper</a>
  
    <li><a href="./OiInstructionMailer.html">OiInstructionMailer</a>
  
    <li><a href="./PartNum.html">PartNum</a>
  
    <li><a href="./PartNumber.html">PartNumber</a>
  
    <li><a href="./PartNumsController.html">PartNumsController</a>
  
    <li><a href="./PartNumsHelper.html">PartNumsHelper</a>
  
    <li><a href="./Pcbtr.html">Pcbtr</a>
  
    <li><a href="./Ping.html">Ping</a>
  
    <li><a href="./PingMailer.html">PingMailer</a>
  
    <li><a href="./Platform.html">Platform</a>
  
    <li><a href="./PlatformController.html">PlatformController</a>
  
    <li><a href="./PostingTimestamp.html">PostingTimestamp</a>
  
    <li><a href="./Prefix.html">Prefix</a>
  
    <li><a href="./PrefixController.html">PrefixController</a>
  
    <li><a href="./Priority.html">Priority</a>
  
    <li><a href="./PriorityController.html">PriorityController</a>
  
    <li><a href="./ProductType.html">ProductType</a>
  
    <li><a href="./ProductTypeController.html">ProductTypeController</a>
  
    <li><a href="./Project.html">Project</a>
  
    <li><a href="./ProjectController.html">ProjectController</a>
  
    <li><a href="./ReportController.html">ReportController</a>
  
    <li><a href="./ReportHelper.html">ReportHelper</a>
  
    <li><a href="./ReviewGroup.html">ReviewGroup</a>
  
    <li><a href="./ReviewGroupController.html">ReviewGroupController</a>
  
    <li><a href="./ReviewManagerController.html">ReviewManagerController</a>
  
    <li><a href="./ReviewStatus.html">ReviewStatus</a>
  
    <li><a href="./ReviewStatusController.html">ReviewStatusController</a>
  
    <li><a href="./ReviewType.html">ReviewType</a>
  
    <li><a href="./ReviewTypeController.html">ReviewTypeController</a>
  
    <li><a href="./Revision.html">Revision</a>
  
    <li><a href="./Role.html">Role</a>
  
    <li><a href="./RoleController.html">RoleController</a>
  
    <li><a href="./Section.html">Section</a>
  
    <li><a href="./SectionController.html">SectionController</a>
  
    <li><a href="./SessionCleaner.html">SessionCleaner</a>
  
    <li><a href="./Subsection.html">Subsection</a>
  
    <li><a href="./SubsectionController.html">SubsectionController</a>
  
    <li><a href="./TimeHelper.html">TimeHelper</a>
  
    <li><a href="./TrackerController.html">TrackerController</a>
  
    <li><a href="./TrackerFix.html">TrackerFix</a>
  
    <li><a href="./TrackerHelper.html">TrackerHelper</a>
  
    <li><a href="./TrackerMailer.html">TrackerMailer</a>
  
    <li><a href="./User.html">User</a>
  
    <li><a href="./UserController.html">UserController</a>
  
    <li><a href="./UserLogin.html">UserLogin</a>
  
    <li><a href="./UserMailer.html">UserMailer</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class Design</h1>

  <div id="description" class="description">
    
<p>Copyright 2005, by Teradyne, Inc., Boston MA</p>

<p>File: design.rb</p>

<p>This file maintains the state for designs</p>

<p>$Id$</p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <!-- Constants -->
    <section id="constants-list" class="section">
      <h3 class="section-header">Constants</h3>
      <dl>
      
        <dt id="COMPLETE">COMPLETE
        
        <dd class="description">
        
      
        <dt id="COMPLETED_RESULTS">COMPLETED_RESULTS
        
        <dd class="description">
        
      
        <dt id="NOT_SET">NOT_SET
        
        <dd class="description">
        
      
      </dl>
    </section>
    

    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-bom_upload_data" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            bom_upload_data() &rarr; string
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Generates a list of active designs with information that is used to load
BOMs to TeamCenter by a DTG process.  This is called by an outside  script.</p>

<p>Outputs the BOM Upload Data.</p>
          

          
          <div class="method-source-code" id="bom_upload_data-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 64</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">bom_upload_data</span>
  
  <span class="ruby-identifier">active_designs</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">get_active_designs</span>
  
  <span class="ruby-identifier">active_designs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">design</span><span class="ruby-operator">|</span>
    
    <span class="ruby-identifier">current_design_review</span> = <span class="ruby-identifier">design</span>.<span class="ruby-identifier">get_phase_design_review</span>
    
    <span class="ruby-identifier">hweng_role</span>  = <span class="ruby-constant">Role</span>.<span class="ruby-identifier">find</span>( <span class="ruby-value">:first</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;name='HWENG'&quot;</span>)
    <span class="ruby-identifier">hweng</span>       = <span class="ruby-identifier">current_design_review</span>.<span class="ruby-identifier">role_reviewer</span>(<span class="ruby-identifier">hweng_role</span>)
    <span class="ruby-identifier">hweng_email</span> = <span class="ruby-identifier">hweng</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">hweng</span>.<span class="ruby-identifier">email</span> <span class="ruby-operator">:</span> <span class="ruby-string">&quot;** NOT SET **&quot;</span>
    
    <span class="ruby-identifier">planning_role</span> = <span class="ruby-constant">Role</span>.<span class="ruby-identifier">find</span>( <span class="ruby-value">:first</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;name='Planning'&quot;</span>)
    <span class="ruby-identifier">planner</span>       = <span class="ruby-identifier">design</span>.<span class="ruby-identifier">get_role_reviewer</span>(<span class="ruby-identifier">planning_role</span>)
    <span class="ruby-identifier">planner_email</span> = <span class="ruby-identifier">planner</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">planner</span>.<span class="ruby-identifier">email</span> <span class="ruby-operator">:</span> <span class="ruby-string">''</span>
    <span class="ruby-identifier">planner_name</span>  = <span class="ruby-identifier">planner</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">planner</span>.<span class="ruby-identifier">name</span>  <span class="ruby-operator">:</span> <span class="ruby-string">''</span>
    
    <span class="ruby-identifier">pcb_path</span> = <span class="ruby-string">'/hwnet/'</span> <span class="ruby-operator">+</span> 
               <span class="ruby-identifier">design</span>.<span class="ruby-identifier">design_center</span>.<span class="ruby-identifier">pcb_path</span> <span class="ruby-operator">+</span> <span class="ruby-string">'/'</span> <span class="ruby-operator">+</span>
               <span class="ruby-identifier">design</span>.<span class="ruby-identifier">directory_name</span> <span class="ruby-operator">+</span> <span class="ruby-string">'/'</span>

    <span class="ruby-identifier">brd_dsn_entry</span> = <span class="ruby-constant">BoardDesignEntry</span>.<span class="ruby-identifier">find</span>( <span class="ruby-value">:first</span>,
      <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;design_id='#{design.id}'&quot;</span>)

    <span class="ruby-identifier">eng_path</span> = <span class="ruby-string">&quot;Not Set&quot;</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">brd_dsn_entry</span>
      <span class="ruby-identifier">eng_path</span> = <span class="ruby-comment"># '/hwnet/' +</span>
        <span class="ruby-identifier">brd_dsn_entry</span>.<span class="ruby-identifier">design_directory_name</span> <span class="ruby-operator">+</span> <span class="ruby-string">'/'</span> <span class="ruby-operator">+</span>
        <span class="ruby-identifier">design</span>.<span class="ruby-identifier">directory_name</span> <span class="ruby-operator">+</span> <span class="ruby-string">'/'</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-constant">PartNum</span>.<span class="ruby-identifier">get_design_pcba_part_numbers</span>(<span class="ruby-identifier">design</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pcba</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">puts</span>(<span class="ruby-identifier">pcba</span>.<span class="ruby-identifier">name_string</span>                             <span class="ruby-operator">+</span> <span class="ruby-string">'|'</span> <span class="ruby-operator">+</span>
          <span class="ruby-identifier">design</span>.<span class="ruby-identifier">pcb_display</span>                            <span class="ruby-operator">+</span> <span class="ruby-string">'|'</span> <span class="ruby-operator">+</span>
          <span class="ruby-identifier">design</span>.<span class="ruby-identifier">phase</span>.<span class="ruby-identifier">name</span>                             <span class="ruby-operator">+</span> <span class="ruby-string">'|'</span> <span class="ruby-operator">+</span>
          <span class="ruby-identifier">current_design_review</span>.<span class="ruby-identifier">review_status</span>.<span class="ruby-identifier">name</span>      <span class="ruby-operator">+</span> <span class="ruby-string">'|'</span> <span class="ruby-operator">+</span>
          <span class="ruby-identifier">planner_email</span>                                 <span class="ruby-operator">+</span> <span class="ruby-string">'|'</span> <span class="ruby-operator">+</span>
          <span class="ruby-identifier">hweng_email</span>                                   <span class="ruby-operator">+</span> <span class="ruby-string">'|'</span> <span class="ruby-operator">+</span>
          <span class="ruby-identifier">design</span>.<span class="ruby-identifier">designer</span>.<span class="ruby-identifier">email</span>                         <span class="ruby-operator">+</span> <span class="ruby-string">'|'</span> <span class="ruby-operator">+</span>
          <span class="ruby-identifier">pcb_path</span>                                      <span class="ruby-operator">+</span> <span class="ruby-string">'|'</span> <span class="ruby-operator">+</span>
          <span class="ruby-identifier">eng_path</span>                                      <span class="ruby-operator">+</span> <span class="ruby-string">'|'</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

<span class="ruby-keyword">end</span></pre>
          </div><!-- bom_upload_data-source -->
          
        </div>

        

        
      </div><!-- bom_upload_data-method -->

    
      <div id="method-c-find_all_active" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">find_all_active</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-c-find_all_active">::find_all_active</a></p>

<p>Description: This method retrieves a list of all active designs.</p>

<p>Parameters: None</p>

<p>Return value: A list of active designs.</p>
          

          
          <div class="method-source-code" id="find_all_active-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 154</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">find_all_active</span>
  <span class="ruby-constant">Design</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;phase_id != #{COMPLETE}&quot;</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- find_all_active-source -->
          
        </div>

        

        
      </div><!-- find_all_active-method -->

    
      <div id="method-c-get_active_designs" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_active_designs</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-c-get_active_designs">::get_active_designs</a></p>

<p>Description: Retrieves a list of all active designs.</p>

<p>Parameters: None</p>

<p>Return value: A list of active designs.</p>
          

          
          <div class="method-source-code" id="get_active_designs-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 174</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">get_active_designs</span> 
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>,
            <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;phase_id!='#{Design::COMPLETE}'&quot;</span>,
            <span class="ruby-value">:order</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'created_on'</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- get_active_designs-source -->
          
        </div>

        

        
      </div><!-- get_active_designs-method -->

    
      <div id="method-c-get_active_designs_owned_by" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_active_designs_owned_by</span><span
            class="method-args">(designer)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a
href="Design.html#method-c-get_active_designs_owned_by">::get_active_designs_owned_by</a></p>

<p>Description: Retrieves a list of all active designs for a given <a
href="Design.html#method-i-designer">#designer</a>.</p>

<p>Parameters: <a href="Design.html#method-i-designer">#designer</a> - the <a
href="User.html">User</a> record for the desinger.</p>

<p>Return value: A list of active designs assigned to the <a
href="Design.html#method-i-designer">#designer</a>.</p>
          

          
          <div class="method-source-code" id="get_active_designs_owned_by-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 198</span>
 <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">get_active_designs_owned_by</span>(<span class="ruby-identifier">designer</span>)

  <span class="ruby-identifier">pre_art_phase_id</span> = <span class="ruby-constant">ReviewType</span>.<span class="ruby-identifier">get_pre_artwork</span>.<span class="ruby-identifier">id</span>

  <span class="ruby-identifier">designs</span>  = <span class="ruby-constant">Design</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>,
                         <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;designer_id='#{designer.id}' &quot;</span> <span class="ruby-operator">+</span>
                                    <span class="ruby-node">&quot;AND phase_id!='#{Design::COMPLETE}' &quot;</span> <span class="ruby-operator">+</span>
                                    <span class="ruby-string">&quot;&quot;</span>, <span class="ruby-comment">#AND phase_id!='#{pre_art_phase_id}'&quot;,</span>
                         <span class="ruby-value">:order</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'created_on'</span>) <span class="ruby-operator">+</span>
             <span class="ruby-constant">Design</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>,
                         <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;pcb_input_id='#{designer.id}' AND phase_id='#{pre_art_phase_id}'&quot;</span>,
                         <span class="ruby-value">:order</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'created_on'</span>)

  <span class="ruby-identifier">designs</span>.<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">sort_by</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">dr</span><span class="ruby-operator">|</span> <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">priority</span>.<span class="ruby-identifier">value</span> }

  <span class="ruby-comment"># Load the design checks for statistics.</span>
  <span class="ruby-identifier">designs</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">design</span><span class="ruby-operator">|</span> <span class="ruby-identifier">design</span>.<span class="ruby-identifier">audit</span>.<span class="ruby-identifier">get_design_checks</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">design</span>.<span class="ruby-identifier">audit</span>.<span class="ruby-identifier">is_peer_audit?</span> }

<span class="ruby-keyword">end</span></pre>
          </div><!-- get_active_designs_owned_by-source -->
          
        </div>

        

        
      </div><!-- get_active_designs_owned_by-method -->

    
      <div id="method-c-get_unique_pcb_numbers" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_unique_pcb_numbers</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a
href="Design.html#method-c-get_unique_pcb_numbers">::get_unique_pcb_numbers</a></p>

<p>Description: This method provides a list of sorted, unique PCB part
numbers. Used for test</p>

<p>Parameters: None</p>

<p>Return value: A list of unique PCB part numbers represented as strings.</p>
          

          
          <div class="method-source-code" id="get_unique_pcb_numbers-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 127</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">get_unique_pcb_numbers</span>
  
  <span class="ruby-identifier">designs</span> =<span class="ruby-constant">Design</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>)
  <span class="ruby-identifier">designs</span>.<span class="ruby-identifier">delete_if</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">pcb_number</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span> }
  <span class="ruby-comment">#designs.collect { |design| design.part_number.pcb_unique_number }.uniq.sort</span>
  <span class="ruby-identifier">designs</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">design</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">pnum</span> = <span class="ruby-constant">PartNum</span>.<span class="ruby-identifier">get_design_pcb_part_number</span>(<span class="ruby-identifier">design</span>.<span class="ruby-identifier">id</span>)
    <span class="ruby-identifier">pnum</span>.<span class="ruby-identifier">uniq_name</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">pnum</span> <span class="ruby-comment">#handle nil</span>
  }.<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">sort</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- get_unique_pcb_numbers-source -->
          
        </div>

        

        
      </div><!-- get_unique_pcb_numbers-method -->

    
      <div id="method-c-http_object" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">http_object</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Class Methods</p>
          

          
          <div class="method-source-code" id="http_object-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 49</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">http_object</span>
  <span class="ruby-identifier">@@h</span> = <span class="ruby-identifier">@@h</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTP</span><span class="ruby-operator">::</span><span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;boarddev.teradyne.com&quot;</span>)
  <span class="ruby-identifier">@@h</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- http_object-source -->
          
        </div>

        

        
      </div><!-- http_object-method -->

    
    </section><!-- public-class-method-details -->
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-admin_updates" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">admin_updates</span><span
            class="method-args">(update, comment, user)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-admin_updates">#admin_updates</a></p>

<p>Description: This method processes the admin update</p>

<p>Parameters: update  - a hash of the attributes to be updated comment - the
userâ€™s comment associated with the update user    -</p>

<p>Return value: None</p>
          

          
          <div class="method-source-code" id="admin_updates-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1253</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">admin_updates</span>(<span class="ruby-identifier">update</span>, <span class="ruby-identifier">comment</span>, <span class="ruby-identifier">user</span>)

  <span class="ruby-identifier">audit</span>= <span class="ruby-keyword">self</span>.<span class="ruby-identifier">audit</span>
  
  <span class="ruby-identifier">changes</span> = {}
  <span class="ruby-identifier">cc_list</span> = []
  <span class="ruby-identifier">set_pcb_input_designer</span> = <span class="ruby-keyword">false</span>

  <span class="ruby-comment"># Update the design reviews</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_reviews</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dr</span><span class="ruby-operator">|</span>

    <span class="ruby-identifier">original_designer</span>    = <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">designer</span>
    <span class="ruby-identifier">original_criticality</span> = <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">priority</span>
    <span class="ruby-identifier">original_review_status</span> = <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">review_status</span>.<span class="ruby-identifier">name</span>

    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">review_status</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;Review Completed&quot;</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">update_criticality</span>(<span class="ruby-identifier">update</span>[<span class="ruby-value">:criticality</span>], <span class="ruby-identifier">user</span>)
      <span class="ruby-identifier">changes</span>[<span class="ruby-value">:criticality</span>] = { <span class="ruby-value">:old</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">original_criticality</span>.<span class="ruby-identifier">name</span>, 
                                <span class="ruby-value">:new</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">update</span>[<span class="ruby-value">:criticality</span>].<span class="ruby-identifier">name</span>}
    <span class="ruby-keyword">end</span>
    
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">update_review_status</span>(<span class="ruby-identifier">update</span>[<span class="ruby-value">:status</span>], <span class="ruby-identifier">user</span>)
      <span class="ruby-identifier">changes</span>[<span class="ruby-value">:review_status</span>] = { <span class="ruby-value">:old</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">original_review_status</span>,
                                  <span class="ruby-value">:new</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">update</span>[<span class="ruby-value">:status</span>].<span class="ruby-identifier">name</span>}
    <span class="ruby-keyword">end</span> 
    

    <span class="ruby-comment"># If the design review is &quot;Pre-Artwork&quot; that is not complete</span>
    <span class="ruby-comment"># then process any PCB Input Gate change.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">update_pcb_input_gate</span>(<span class="ruby-identifier">update</span>[<span class="ruby-value">:pcb_input_gate</span>], <span class="ruby-identifier">user</span>)
      <span class="ruby-identifier">cc_list</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">original_designer</span>.<span class="ruby-identifier">email</span>
      <span class="ruby-identifier">cc_list</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">update</span>[<span class="ruby-value">:pcb_input_gate</span>].<span class="ruby-identifier">email</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">update</span>[<span class="ruby-value">:pcb_input_gate</span>].<span class="ruby-identifier">id</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>

      <span class="ruby-identifier">changes</span>[<span class="ruby-value">:pcb_input_gate</span>] = { <span class="ruby-value">:old</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">original_designer</span>.<span class="ruby-identifier">name</span>, 
                                   <span class="ruby-value">:new</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">update</span>[<span class="ruby-value">:pcb_input_gate</span>].<span class="ruby-identifier">name</span>}

      <span class="ruby-identifier">set_pcb_input_designer</span> = <span class="ruby-keyword">true</span>

    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">update_release_review_poster</span>(<span class="ruby-identifier">update</span>[<span class="ruby-value">:release_poster</span>], <span class="ruby-identifier">user</span>)

      <span class="ruby-identifier">cc_list</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">original_designer</span>.<span class="ruby-identifier">email</span>
      <span class="ruby-identifier">cc_list</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">update</span>[<span class="ruby-value">:release_poster</span>].<span class="ruby-identifier">email</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">update</span>[<span class="ruby-value">:release_poster</span>].<span class="ruby-identifier">id</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">changes</span>[<span class="ruby-value">:release_poster</span>] = { <span class="ruby-value">:old</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">original_designer</span>.<span class="ruby-identifier">name</span>, 
                                   <span class="ruby-value">:new</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">update</span>[<span class="ruby-value">:release_poster</span>].<span class="ruby-identifier">name</span> }
      
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">update_reviews_designer_poster</span>(<span class="ruby-identifier">update</span>[<span class="ruby-value">:designer</span>], <span class="ruby-identifier">user</span>)

      <span class="ruby-identifier">cc_list</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">designer</span>.<span class="ruby-identifier">email</span>       <span class="ruby-keyword">if</span> <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">designer_id</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">cc_list</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">update</span>[<span class="ruby-value">:designer</span>].<span class="ruby-identifier">email</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">update</span>[<span class="ruby-value">:designer</span>].<span class="ruby-identifier">id</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">changes</span>[<span class="ruby-value">:designer</span>] = { <span class="ruby-value">:old</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">original_designer</span>.<span class="ruby-identifier">name</span>, 
                             <span class="ruby-value">:new</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">update</span>[<span class="ruby-value">:designer</span>].<span class="ruby-identifier">name</span> }
    <span class="ruby-keyword">end</span>
    
    <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">reload</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">changes</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>

  <span class="ruby-keyword">end</span>
  
  <span class="ruby-comment"># Update the design.</span>
  <span class="ruby-identifier">cc_list</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">input_gate</span>.<span class="ruby-identifier">email</span>               <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pcb_input_id</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
  <span class="ruby-identifier">cc_list</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">designer</span>.<span class="ruby-identifier">email</span>                 <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">designer_id</span>  <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">set_pcb_input_designer</span> <span class="ruby-operator">&amp;&amp;</span> 
     <span class="ruby-identifier">update</span>[<span class="ruby-value">:pcb_input_gate</span>] <span class="ruby-operator">&amp;&amp;</span> 
     <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pcb_input_id</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">update</span>[<span class="ruby-value">:pcb_input_gate</span>].<span class="ruby-identifier">id</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pcb_input_id</span> = <span class="ruby-identifier">update</span>[<span class="ruby-value">:pcb_input_gate</span>].<span class="ruby-identifier">id</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">old_pcb_path</span> = <span class="ruby-string">'/hwnet/'</span> <span class="ruby-operator">+</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_center</span>.<span class="ruby-identifier">pcb_path</span> <span class="ruby-operator">+</span> <span class="ruby-string">'/'</span> <span class="ruby-operator">+</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">directory_name</span>
  <span class="ruby-identifier">old_design_center_name</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">set_design_center</span>(<span class="ruby-identifier">update</span>[<span class="ruby-value">:design_center</span>], <span class="ruby-identifier">user</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">old_design_center_name</span>
    <span class="ruby-identifier">changes</span>[<span class="ruby-value">:design_center</span>] = { <span class="ruby-value">:old</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">old_design_center_name</span>,
                                <span class="ruby-value">:new</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">update</span>[<span class="ruby-value">:design_center</span>].<span class="ruby-identifier">name</span> }
    <span class="ruby-comment"># call the program to rename assembly folders in the NPI BOM data to reflect the</span>
    <span class="ruby-comment"># movement of the design.</span>
    <span class="ruby-identifier">new_pcb_path</span> = <span class="ruby-string">'/hwnet/'</span> <span class="ruby-operator">+</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_center</span>.<span class="ruby-identifier">pcb_path</span> <span class="ruby-operator">+</span> <span class="ruby-string">'/'</span> <span class="ruby-operator">+</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">directory_name</span>
    <span class="ruby-constant">PartNum</span>.<span class="ruby-identifier">get_design_pcba_part_numbers</span>(<span class="ruby-keyword">self</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">pcba</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">cmd</span> = <span class="ruby-string">&quot;/hwnet/dtg_devel/web/boarddev/cgi-bin/npi_boms/rename_assembly_folder.pl&quot;</span> <span class="ruby-operator">+</span>
        <span class="ruby-string">&quot; &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">pcba</span>.<span class="ruby-identifier">name_string</span> <span class="ruby-operator">+</span>
        <span class="ruby-string">&quot; &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">old_pcb_path</span> <span class="ruby-operator">+</span>
        <span class="ruby-string">&quot; &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">new_pcb_path</span>
      <span class="ruby-identifier">system</span>(<span class="ruby-identifier">cmd</span>) <span class="ruby-keyword">unless</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">env</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;test&quot;</span>
    }
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">update</span>[<span class="ruby-value">:designer</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">designer_id</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">update</span>[<span class="ruby-value">:designer</span>].<span class="ruby-identifier">id</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">record_update</span>(<span class="ruby-string">'Designer'</span>, 
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">designer</span>.<span class="ruby-identifier">name</span>,
      <span class="ruby-identifier">update</span>[<span class="ruby-value">:designer</span>].<span class="ruby-identifier">name</span>,
      <span class="ruby-identifier">user</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">designer_id</span> = <span class="ruby-identifier">update</span>[<span class="ruby-value">:designer</span>].<span class="ruby-identifier">id</span>
 <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">update</span>[<span class="ruby-value">:criticality</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">priority_id</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">update</span>[<span class="ruby-value">:criticality</span>].<span class="ruby-identifier">id</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">priority</span>  = <span class="ruby-identifier">update</span>[<span class="ruby-value">:criticality</span>] 
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">update</span>[<span class="ruby-value">:eco_number</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">eco_number</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">update</span>[<span class="ruby-value">:eco_number</span>]
    <span class="ruby-identifier">old_eco_number</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">eco_number</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">eco_number</span> = <span class="ruby-identifier">update</span>[<span class="ruby-value">:eco_number</span>]
    <span class="ruby-identifier">changes</span>[<span class="ruby-value">:ecn_number</span>] = { <span class="ruby-value">:old</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">old_eco_number</span>, <span class="ruby-value">:new</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">update</span>[<span class="ruby-value">:eco_number</span>]}
  <span class="ruby-keyword">end</span>
  
  <span class="ruby-identifier">audit</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">audit</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">update</span>[<span class="ruby-value">:peer</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">peer_id</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">update</span>[<span class="ruby-value">:peer</span>].<span class="ruby-identifier">id</span> 
    
    <span class="ruby-identifier">final_design_review</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">get_design_review</span>(<span class="ruby-string">'Final'</span>)
    <span class="ruby-identifier">valor_review_result</span> = <span class="ruby-identifier">final_design_review</span>.<span class="ruby-identifier">get_review_result</span>(<span class="ruby-string">'Valor'</span>)
    
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">valor_review_result</span>.<span class="ruby-identifier">reviewer_id</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">update</span>[<span class="ruby-value">:peer</span>].<span class="ruby-identifier">id</span>
        
      <span class="ruby-identifier">cc_list</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">valor_review_result</span>.<span class="ruby-identifier">reviewer</span>.<span class="ruby-identifier">email</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">valor_review_result</span>.<span class="ruby-identifier">reviewer_id</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">changes</span>[<span class="ruby-value">:valor</span>] = { <span class="ruby-value">:old</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">valor_review_result</span>.<span class="ruby-identifier">reviewer</span>.<span class="ruby-identifier">name</span>,
                          <span class="ruby-value">:new</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">update</span>[<span class="ruby-value">:peer</span>].<span class="ruby-identifier">name</span> }
      <span class="ruby-identifier">final_design_review</span>.<span class="ruby-identifier">record_update</span>(<span class="ruby-string">'Valor Reviewer'</span>,
                                        <span class="ruby-identifier">valor_review_result</span>.<span class="ruby-identifier">reviewer</span>.<span class="ruby-identifier">name</span>,
                                        <span class="ruby-identifier">update</span>[<span class="ruby-value">:peer</span>].<span class="ruby-identifier">name</span>,
                                        <span class="ruby-identifier">user</span>)
                        
      <span class="ruby-identifier">valor_review_result</span>.<span class="ruby-identifier">reviewer_id</span> = <span class="ruby-identifier">update</span>[<span class="ruby-value">:peer</span>].<span class="ruby-identifier">id</span>
      <span class="ruby-identifier">valor_review_result</span>.<span class="ruby-identifier">save</span>
         
    <span class="ruby-keyword">end</span>
    
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">audit</span>.<span class="ruby-identifier">skip?</span>  <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">audit</span>.<span class="ruby-identifier">is_complete?</span>
      <span class="ruby-identifier">changes</span>[<span class="ruby-value">:peer</span>] = { <span class="ruby-value">:old</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">peer</span>.<span class="ruby-identifier">name</span>, <span class="ruby-value">:new</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">update</span>[<span class="ruby-value">:peer</span>].<span class="ruby-identifier">name</span> }
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">record_update</span>(<span class="ruby-string">'Peer Auditor'</span>, 
                          <span class="ruby-keyword">self</span>.<span class="ruby-identifier">peer</span>.<span class="ruby-identifier">name</span>, 
                          <span class="ruby-identifier">update</span>[<span class="ruby-value">:peer</span>].<span class="ruby-identifier">name</span>,
                          <span class="ruby-identifier">user</span>)
    
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">peer_id</span> = <span class="ruby-identifier">update</span>[<span class="ruby-value">:peer</span>].<span class="ruby-identifier">id</span>
    <span class="ruby-keyword">end</span>
    
  <span class="ruby-keyword">end</span>

      
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">changes</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> 

    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">save</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">reload</span>

    <span class="ruby-constant">TrackerMailer</span><span class="ruby-operator">::</span><span class="ruby-identifier">design_modification</span>(
      <span class="ruby-identifier">user</span>,
      <span class="ruby-keyword">self</span>,
      <span class="ruby-identifier">modification_comment</span>(<span class="ruby-identifier">comment</span>, <span class="ruby-identifier">changes</span>), 
      <span class="ruby-identifier">cc_list</span>).<span class="ruby-identifier">deliver</span>

    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pcb_number</span> <span class="ruby-operator">+</span>
    <span class="ruby-string">' has been updated - the updates were recorded and mail was sent'</span>
    
  <span class="ruby-keyword">else</span>
    <span class="ruby-string">&quot;Nothing was changed - no updates were recorded&quot;</span>
  <span class="ruby-keyword">end</span>

<span class="ruby-keyword">end</span></pre>
          </div><!-- admin_updates-source -->
          
        </div>

        

        
      </div><!-- admin_updates-method -->

    
      <div id="method-i-all_assignments" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">all_assignments</span><span
            class="method-args">(category_id = 0)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-all_assignments">#all_assignments</a></p>

<p>Description: This method retrieves all of the designâ€™s outsource
instruction  assignments.  If the category_id is provided then the list is 
limited to the outsource instruction assignments for the category.</p>

<p>Parameters: category_id - to identify the category to provide outsource</p>

<pre>instruction assignments when greater than 0</pre>

<p>Return value: A list of outsource instruction assignments</p>
          

          
          <div class="method-source-code" id="all_assignments-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 662</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">all_assignments</span>(<span class="ruby-identifier">category_id</span> = <span class="ruby-value">0</span>)

  <span class="ruby-identifier">assignments</span>  = []
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">oi_instructions</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">instruction</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">category_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">category_id</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">instruction</span>.<span class="ruby-identifier">oi_category_section</span>.<span class="ruby-identifier">oi_category_id</span>
    <span class="ruby-identifier">instruction</span>.<span class="ruby-identifier">oi_assignments</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">assignment</span><span class="ruby-operator">|</span> <span class="ruby-identifier">assignments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">assignment</span> }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assignments</span>

<span class="ruby-keyword">end</span></pre>
          </div><!-- all_assignments-source -->
          
        </div>

        

        
      </div><!-- all_assignments-method -->

    
      <div id="method-i-all_reviewers" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">all_reviewers</span><span
            class="method-args">(sorted = true)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-all_reviewers">#all_reviewers</a></p>

<p>Description: This method returns a list of all of the <a
href="Design.html#method-i-reviewers">#reviewers</a> responsible for the
various reviews on the board.</p>

<p>Parameters: None</p>

<p>Return value: A list of unique <a href="User.html">User</a> records.  One
for each of the <a href="Design.html#method-i-reviewers">#reviewers</a>.</p>
          

          
          <div class="method-source-code" id="all_reviewers-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 950</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">all_reviewers</span>(<span class="ruby-identifier">sorted</span> = <span class="ruby-keyword">true</span>)

  <span class="ruby-identifier">reviewer_list</span> = []
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_reviews</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">design_review</span><span class="ruby-operator">|</span>
    <span class="ruby-comment"># design_review.reviewers will not add duplicate</span>
    <span class="ruby-comment"># records to reviewer_list</span>
    <span class="ruby-identifier">reviewer_list</span> = <span class="ruby-identifier">design_review</span>.<span class="ruby-identifier">reviewers</span>(<span class="ruby-identifier">reviewer_list</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">reviewer_list</span>.<span class="ruby-identifier">sort_by</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">reviewer</span><span class="ruby-operator">|</span> <span class="ruby-identifier">reviewer</span>.<span class="ruby-identifier">last_name</span> } <span class="ruby-keyword">if</span> <span class="ruby-identifier">sorted</span>
  
<span class="ruby-keyword">end</span></pre>
          </div><!-- all_reviewers-source -->
          
        </div>

        

        
      </div><!-- all_reviewers-method -->

    
      <div id="method-i-assignment_count" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">assignment_count</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-assignment_count">#assignment_count</a></p>

<p>Description: Computes the number of outsource instruction assignments for
the  design.</p>

<p>Parameters: None</p>

<p>Return value: An integer representing the number of outsource instruction
assignments assigned for the design.</p>
          

          
          <div class="method-source-code" id="assignment_count-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 317</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">assignment_count</span>
  <span class="ruby-identifier">total</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">oi_instructions</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">inst</span><span class="ruby-operator">|</span> <span class="ruby-identifier">total</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">assignment_count</span> }
  <span class="ruby-identifier">total</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- assignment_count-source -->
          
        </div>

        

        
      </div><!-- assignment_count-method -->

    
      <div id="method-i-assignments_complete-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">assignments_complete?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a
href="Design.html#method-i-assignments_complete-3F">#assignments_complete?</a></p>

<p>Description: Reports on the completion status of the outsource instruction 
assignments for the design.</p>

<p>Parameters: None</p>

<p>Return value: TRUE if all of the outsource instructions assignments are
complete. Otherwise, false.</p>
          

          
          <div class="method-source-code" id="assignments_complete-3F-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 389</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">assignments_complete?</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">assignment_count</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">completed_assignment_count</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- assignments_complete-3F-source -->
          
        </div>

        

        
      </div><!-- assignments_complete-3F-method -->

    
      <div id="method-i-audit_type" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">audit_type</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-audit_type">#audit_type</a></p>

<p>Description: Determines the audit type, full or partial, associated with
the  design</p>

<p>Parameters: None</p>

<p>Return value: A string indicating the designâ€™s audit type</p>
          

          
          <div class="method-source-code" id="audit_type-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1743</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">audit_type</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">new?</span> <span class="ruby-operator">?</span> <span class="ruby-string">'Full'</span> <span class="ruby-operator">:</span> <span class="ruby-string">'Partial'</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- audit_type-source -->
          
        </div>

        

        
      </div><!-- audit_type-method -->

    
      <div id="method-i-belongs_to" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">belongs_to</span><span
            class="method-args">(entity)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-belongs_to">#belongs_to</a></p>

<p>Description: This method looks at the entity (section, subsection, or
check) to determine if it belongs to the design.</p>

<p>Parameters: None</p>

<p>Return value: TRUE if the entity belongs to the design, FALSE otherwise.</p>
          

          
          <div class="method-source-code" id="belongs_to-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1043</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">belongs_to</span>(<span class="ruby-identifier">entity</span>)
    ((<span class="ruby-identifier">entity</span>.<span class="ruby-identifier">full_review?</span>     <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">new?</span>)       <span class="ruby-operator">||</span>
     (<span class="ruby-identifier">entity</span>.<span class="ruby-identifier">date_code_check?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">date_code?</span>) <span class="ruby-operator">||</span>
     (<span class="ruby-identifier">entity</span>.<span class="ruby-identifier">dot_rev_check?</span>   <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">dot_rev?</span>))
<span class="ruby-keyword">end</span></pre>
          </div><!-- belongs_to-source -->
          
        </div>

        

        
      </div><!-- belongs_to-method -->

    
      <div id="method-i-comments_by_role" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">comments_by_role</span><span
            class="method-args">(role_list)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-comments_by_role">#comments_by_role</a></p>

<p>Description: This method retrieves the design review comments for the roles
identified in the role_list parameter.</p>

<p>Parameters: role_list - a list of role names</p>

<p>Return value: A list of design review comments associated with the design
review  and the roles identified in the role_list.</p>
          

          
          <div class="method-source-code" id="comments_by_role-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 455</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">comments_by_role</span>(<span class="ruby-identifier">role_list</span>)

  <span class="ruby-identifier">role_names</span> = (<span class="ruby-identifier">role_list</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">==</span> <span class="ruby-constant">String</span>) <span class="ruby-operator">?</span> [<span class="ruby-identifier">role_list</span>] <span class="ruby-operator">:</span> <span class="ruby-identifier">role_list</span>
  
  <span class="ruby-identifier">comment_list</span> = []
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_reviews</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">dr</span><span class="ruby-operator">|</span> <span class="ruby-identifier">comment_list</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">comments_by_role</span>(<span class="ruby-identifier">role_names</span>) }
  
  <span class="ruby-identifier">comment_list</span>.<span class="ruby-identifier">sort_by</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">created_on</span> }.<span class="ruby-identifier">reverse</span>

<span class="ruby-keyword">end</span></pre>
          </div><!-- comments_by_role-source -->
          
        </div>

        

        
      </div><!-- comments_by_role-method -->

    
      <div id="method-i-complete-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">complete?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-complete-3F">#complete?</a></p>

<p>Description: This method reports on the completion of a design</p>

<p>Parameters: None</p>

<p>Return value: True if the design is completed, otherwise False.</p>
          

          
          <div class="method-source-code" id="complete-3F-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 763</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">complete?</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">phase_id</span> <span class="ruby-operator">==</span> <span class="ruby-constant">COMPLETE</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- complete-3F-source -->
          
        </div>

        

        
      </div><!-- complete-3F-method -->

    
      <div id="method-i-completed_assignment_count" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">completed_assignment_count</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a
href="Design.html#method-i-completed_assignment_count">#completed_assignment_count</a></p>

<p>Description: Computes the number of completed outsource instruction
assignments  for the design.</p>

<p>Parameters: None</p>

<p>Return value: An integer representing the number of completed outsource 
instruction assignments assigned for the design.</p>
          

          
          <div class="method-source-code" id="completed_assignment_count-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 341</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">completed_assignment_count</span>
  <span class="ruby-identifier">total</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">oi_instructions</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">inst</span><span class="ruby-operator">|</span> <span class="ruby-identifier">total</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">completed_assignment_count</span> }
  <span class="ruby-identifier">total</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- completed_assignment_count-source -->
          
        </div>

        

        
      </div><!-- completed_assignment_count-method -->

    
      <div id="method-i-date_code-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">date_code?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-date_code-3F">#date_code?</a></p>

<p>Description: This method looks at the design_type and returns TRUE if it is
set to â€˜Date Codeâ€™.</p>

<p>Parameters: None</p>

<p>Return value: TRUE if the design is a â€˜Date Codeâ€™ design, FALSE otherwise.</p>
          

          
          <div class="method-source-code" id="date_code-3F-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 980</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">date_code?</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_type</span> <span class="ruby-operator">==</span> <span class="ruby-string">'Date Code'</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- date_code-3F-source -->
          
        </div>

        

        
      </div><!-- date_code-3F-method -->

    
      <div id="method-i-designer" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">designer</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-designer">#designer</a></p>

<p>Description: This method returns the user record for the <a
href="Design.html#method-i-designer">#designer</a> who is  listed for the
design.  If there is no listed <a
href="Design.html#method-i-designer">#designer</a>, a user record is
created and the <a href="Design.html#method-i-name">#name</a> is set to
â€˜Not Assignedâ€™.</p>

<p>Parameters: None</p>

<p>Return value: A <a href="User.html">User</a> record for the <a
href="Design.html#method-i-designer">#designer</a>.</p>
          

          
          <div class="method-source-code" id="designer-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 737</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">designer</span>

  <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">designer_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-constant">User</span>.<span class="ruby-identifier">find</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">designer_id</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">User</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:first_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'Not'</span>, <span class="ruby-value">:last_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'Assigned'</span>)
  <span class="ruby-keyword">end</span>

<span class="ruby-keyword">end</span></pre>
          </div><!-- designer-source -->
          
        </div>

        

        
      </div><!-- designer-method -->

    
      <div id="method-i-detailed_name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">detailed_name</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-detailed_name">#detailed_name</a></p>

<p>Description: This method returns the detailed <a
href="Design.html#method-i-name">#name</a> for the design</p>

<p>Parameters: None</p>

<p>Return value: A string with the designâ€™s detailed <a
href="Design.html#method-i-name">#name</a></p>
          

          
          <div class="method-source-code" id="detailed_name-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1720</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">detailed_name</span>
  <span class="ruby-identifier">brd</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">board</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">directory_name</span> <span class="ruby-operator">+</span> <span class="ruby-string">' - '</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">brd</span>.<span class="ruby-identifier">platform</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">+</span> <span class="ruby-string">' / '</span> <span class="ruby-operator">+</span>
  <span class="ruby-identifier">brd</span>.<span class="ruby-identifier">project</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">+</span> <span class="ruby-string">' / '</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">brd</span>.<span class="ruby-identifier">description</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- detailed_name-source -->
          
        </div>

        

        
      </div><!-- detailed_name-method -->

    
      <div id="method-i-directory_name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">directory_name</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-directory_name">#directory_name</a></p>

<p>Description: Provides the <a href="Design.html#method-i-name">#name</a> of
the directory in the PCB design file  directory.</p>

<p>Parameters: None</p>

<p>Return value: A string that represents the designâ€™s PCB design directory.</p>
          

          
          <div class="method-source-code" id="directory_name-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1790</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">directory_name</span>
  
  <span class="ruby-identifier">pnum</span> = <span class="ruby-constant">PartNum</span>.<span class="ruby-identifier">get_design_pcb_part_number</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">id</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">pnum</span> 
    <span class="ruby-identifier">directory_name</span> = <span class="ruby-string">&quot;pcb&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">pnum</span>.<span class="ruby-identifier">prefix</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;_&quot;</span> <span class="ruby-operator">+</span>
    <span class="ruby-identifier">pnum</span>.<span class="ruby-identifier">number</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;_&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">pnum</span>.<span class="ruby-identifier">dash</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;_&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">pnum</span>.<span class="ruby-identifier">revision</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">directory_name</span>
  <span class="ruby-keyword">end</span>
  
  <span class="ruby-comment"># If execution reaches this point then the design was originated</span>
  <span class="ruby-comment"># under the old part numbering schema and the directory is based on </span>
  <span class="ruby-comment"># the pnemonic.</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pnemonic_based_name</span>
  
<span class="ruby-keyword">end</span></pre>
          </div><!-- directory_name-source -->
          
        </div>

        

        
      </div><!-- directory_name-method -->

    
      <div id="method-i-display_summary" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">display_summary</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-display_summary">#display_summary</a></p>

<p>Description: Provides summary information about the design for display. The
summary is in the following format:</p>

<pre>directory_name -&gt; platform_name / project_name</pre>

<p>Parameters: None</p>

<p>Return value: A string containing the display summary.</p>
          

          
          <div class="method-source-code" id="display_summary-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1824</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">display_summary</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">directory_name</span> <span class="ruby-operator">+</span> <span class="ruby-string">' -&gt; '</span> <span class="ruby-operator">+</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">board</span>.<span class="ruby-identifier">platform</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">+</span> <span class="ruby-string">' / '</span> <span class="ruby-operator">+</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">board</span>.<span class="ruby-identifier">project</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- display_summary-source -->
          
        </div>

        

        
      </div><!-- display_summary-method -->

    
      <div id="method-i-dot_rev-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">dot_rev?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-dot_rev-3F">#dot_rev?</a></p>

<p>Description: This method looks at the design_type and returns TRUE if it is
set to â€˜Dot Revâ€™.</p>

<p>Parameters: None</p>

<p>Return value: TRUE if the design is a â€˜Dot Revâ€™ design, FALSE otherwise.</p>
          

          
          <div class="method-source-code" id="dot_rev-3F-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1001</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">dot_rev?</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_type</span> <span class="ruby-operator">==</span> <span class="ruby-string">'Dot Rev'</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- dot_rev-3F-source -->
          
        </div>

        

        
      </div><!-- dot_rev-3F-method -->

    
      <div id="method-i-flip_design_type" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">flip_design_type</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-flip_design_type">#flip_design_type</a></p>

<p>Description: The design type is toggled between â€˜Newâ€™ (full) and â€˜Dot Revâ€™
(partial) and then the audit checklist is updated.</p>

<p>Parameters: None</p>

<p>Return value: The number of design checks that have been added or removed.</p>
          

          
          <div class="method-source-code" id="flip_design_type-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1764</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">flip_design_type</span>
  
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_type</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_type</span> <span class="ruby-operator">==</span> <span class="ruby-string">'New'</span> <span class="ruby-operator">?</span> <span class="ruby-string">'Dot Rev'</span> <span class="ruby-operator">:</span> <span class="ruby-string">'New'</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">save</span>
  
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">audit</span>.<span class="ruby-identifier">update_checklist_type</span>
  
<span class="ruby-keyword">end</span></pre>
          </div><!-- flip_design_type-source -->
          
        </div>

        

        
      </div><!-- flip_design_type-method -->

    
      <div id="method-i-get_associated_users" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_associated_users</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a
href="Design.html#method-i-get_associated_users">#get_associated_users</a></p>

<p>Description: This method returns a hash of all of the people interested in 
the design.  The user records are access by the role names. The <a
href="Design.html#method-i-reviewers">#reviewers</a> are accessed by the
key :<a href="Design.html#method-i-reviewers">#reviewers</a>.</p>

<p>Parameters: None</p>

<p>Return value: A hash of user records accessed by their role names.</p>
          

          
          <div class="method-source-code" id="get_associated_users-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 693</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_associated_users</span>

  <span class="ruby-identifier">users</span> = {<span class="ruby-value">:designer</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>,
           <span class="ruby-value">:pcb_input</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>,
           <span class="ruby-value">:peer</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>,
           <span class="ruby-value">:reviewers</span> =<span class="ruby-operator">&gt;</span> []}
           
  <span class="ruby-identifier">users</span>[<span class="ruby-value">:designer</span>]  = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">designer_id</span>)  <span class="ruby-keyword">if</span> (<span class="ruby-keyword">self</span>.<span class="ruby-identifier">designer_id</span>  <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>)
  <span class="ruby-identifier">users</span>[<span class="ruby-value">:peer</span>]      = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">peer_id</span>)      <span class="ruby-keyword">if</span> (<span class="ruby-keyword">self</span>.<span class="ruby-identifier">peer_id</span>      <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>)
  <span class="ruby-identifier">users</span>[<span class="ruby-value">:pcb_input</span>] = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">pcb_input_id</span>) <span class="ruby-keyword">if</span> (<span class="ruby-keyword">self</span>.<span class="ruby-identifier">pcb_input_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>)
  
  <span class="ruby-identifier">reviewer_list</span> = {}
  <span class="ruby-identifier">design_reviews</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_reviews</span>
  <span class="ruby-identifier">design_reviews</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">design_review</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">design_review</span>.<span class="ruby-identifier">design_review_results</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">design_review_result</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">reviewer_id</span> = <span class="ruby-identifier">design_review_result</span>.<span class="ruby-identifier">reviewer_id</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">reviewer_list</span>[<span class="ruby-identifier">reviewer_id</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-identifier">reviewer_list</span>[<span class="ruby-identifier">reviewer_id</span>] = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">reviewer_id</span>)
        <span class="ruby-identifier">users</span>[<span class="ruby-value">:reviewers</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">reviewer_list</span>[<span class="ruby-identifier">reviewer_id</span>]
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
           
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">users</span> 
<span class="ruby-keyword">end</span></pre>
          </div><!-- get_associated_users-source -->
          
        </div>

        

        
      </div><!-- get_associated_users-method -->

    
      <div id="method-i-get_associated_users_by_role" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_associated_users_by_role</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a
href="Design.html#method-i-get_associated_users_by_role">#get_associated_users_by_role</a></p>

<p>Description: This method returns a hash of all of the people interested in 
the design.  The user records are access by the role names.</p>

<p>Parameters: None</p>

<p>Return value: A hash of user records accessed by their role names.</p>
          

          
          <div class="method-source-code" id="get_associated_users_by_role-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 483</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_associated_users_by_role</span>

  <span class="ruby-identifier">users</span> = {}
  
  <span class="ruby-identifier">users</span>[<span class="ruby-value">:designer</span>]  = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">designer</span>   <span class="ruby-keyword">if</span> (<span class="ruby-keyword">self</span>.<span class="ruby-identifier">designer_id</span>  <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>)
  <span class="ruby-identifier">users</span>[<span class="ruby-value">:peer</span>]      = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">peer</span>       <span class="ruby-keyword">if</span> (<span class="ruby-keyword">self</span>.<span class="ruby-identifier">peer_id</span>      <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>)
  <span class="ruby-identifier">users</span>[<span class="ruby-value">:pcb_input</span>] = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">input_gate</span> <span class="ruby-keyword">if</span> (<span class="ruby-keyword">self</span>.<span class="ruby-identifier">pcb_input_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>)

  <span class="ruby-identifier">role_names</span> = [<span class="ruby-string">'Hardware Engineering Manager'</span>, <span class="ruby-string">'Program Manager'</span>]
  
  <span class="ruby-identifier">role_names</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">role_name</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">role</span>     = <span class="ruby-constant">Role</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-identifier">role_name</span>)
    <span class="ruby-identifier">reviewer</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">board</span>.<span class="ruby-identifier">board_reviewers</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">br</span><span class="ruby-operator">|</span> <span class="ruby-identifier">br</span>.<span class="ruby-identifier">role_id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">role</span>.<span class="ruby-identifier">id</span> }

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">reviewer</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">reviewer</span>.<span class="ruby-identifier">reviewer_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">users</span>[<span class="ruby-identifier">role_name</span>] = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">reviewer</span>.<span class="ruby-identifier">reviewer_id</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">users</span>[<span class="ruby-identifier">role_name</span>] = <span class="ruby-constant">User</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:first_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'Not'</span>, <span class="ruby-value">:last_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'Set'</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  
  <span class="ruby-identifier">reviewer_list</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">all_reviewers</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_reviews</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">design_review</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">design_review</span>.<span class="ruby-identifier">design_review_results</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">review_result</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">role</span> = <span class="ruby-constant">Role</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">review_result</span>.<span class="ruby-identifier">role_id</span>)
      <span class="ruby-keyword">if</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">users</span>[<span class="ruby-identifier">role</span>.<span class="ruby-identifier">name</span>]
        <span class="ruby-identifier">users</span>[<span class="ruby-identifier">role</span>.<span class="ruby-identifier">name</span>] = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">review_result</span>.<span class="ruby-identifier">reviewer_id</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">users</span>
  
<span class="ruby-keyword">end</span></pre>
          </div><!-- get_associated_users_by_role-source -->
          
        </div>

        

        
      </div><!-- get_associated_users_by_role-method -->

    
      <div id="method-i-get_design_review" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_design_review</span><span
            class="method-args">(name)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-get_design_review">#get_design_review</a></p>

<p>Description: This method returns the design review for the review type
identified by <a href="Design.html#method-i-name">#name</a>.</p>

<p>Parameters: <a href="Design.html#method-i-name">#name</a> - the review type
<a href="Design.html#method-i-name">#name</a></p>

<p>Return value: The design review record for the desired review type.</p>
          

          
          <div class="method-source-code" id="get_design_review-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1430</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_design_review</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_reviews</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">dr</span><span class="ruby-operator">|</span> <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">review_type</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">name</span> }
<span class="ruby-keyword">end</span></pre>
          </div><!-- get_design_review-source -->
          
        </div>

        

        
      </div><!-- get_design_review-method -->

    
      <div id="method-i-get_mail_lists" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            mail_lists([design_review_id) &rarr; {return hash}
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Provide lists of users for mailing list display</p>

<p>An hash of containing 3 arrays of users</p>

<pre class="ruby">:<span class="ruby-identifier">reviewers</span>  =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">name</span>, :<span class="ruby-identifier">group</span>, :<span class="ruby-identifier">last_name</span>, :<span class="ruby-identifier">id</span> }
:<span class="ruby-identifier">copied</span>     =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">users</span>]
:<span class="ruby-identifier">not_copied</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">users</span>]
</pre>
          

          
          <div class="method-source-code" id="get_mail_lists-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 528</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_mail_lists</span>(<span class="ruby-identifier">design_review_id</span>=<span class="ruby-string">&quot;&quot;</span>)

  <span class="ruby-keyword">if</span>  <span class="ruby-identifier">design_review_id</span>.<span class="ruby-identifier">blank?</span>
   <span class="ruby-comment"># Get a list of all design reviews</span>
    <span class="ruby-identifier">design_reviews</span> = <span class="ruby-constant">DesignReview</span>.<span class="ruby-identifier">find_all_by_design_id</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">id</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-comment"># Get the specified design review</span>
    <span class="ruby-identifier">design_reviews</span> = [ <span class="ruby-constant">DesignReview</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">design_review_id</span>) ]
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># get the reviewer names, their functions and sort the list by the</span>
  <span class="ruby-comment"># reviewer's last name.</span>
  <span class="ruby-identifier">reviewers_data</span> = []
  <span class="ruby-identifier">reviewers</span> = []

  <span class="ruby-identifier">design_reviews</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dr</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">design_review_results</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">review_result</span><span class="ruby-operator">|</span>
       <span class="ruby-identifier">reviewers_data</span>.<span class="ruby-identifier">push</span>({ <span class="ruby-value">:name</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">review_result</span>.<span class="ruby-identifier">reviewer</span>.<span class="ruby-identifier">name</span>,
                             <span class="ruby-value">:group</span>     =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">review_result</span>.<span class="ruby-identifier">role</span>.<span class="ruby-identifier">name</span>,
                             <span class="ruby-value">:last_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">review_result</span>.<span class="ruby-identifier">reviewer</span>.<span class="ruby-identifier">last_name</span>,
                             <span class="ruby-value">:id</span>        =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">review_result</span>.<span class="ruby-identifier">reviewer_id</span>
                           })
       <span class="ruby-identifier">user</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">review_result</span>.<span class="ruby-identifier">reviewer_id</span>)
       <span class="ruby-identifier">reviewers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">user</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">reviewers</span>.<span class="ruby-identifier">uniq</span>

  <span class="ruby-comment">#create the cc and not on cc lists</span>
  <span class="ruby-identifier">users_on_cc_list</span> = []
  <span class="ruby-comment">#  start with all design users</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">board</span>.<span class="ruby-identifier">users</span>.<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">user</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">users_on_cc_list</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">user</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">reviewers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">user</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Get all of the users, remove the reviewer names, and add the full name.</span>
  <span class="ruby-identifier">users</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>,
    <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'active=1'</span>)

  <span class="ruby-identifier">users_copied</span>     = []
  <span class="ruby-identifier">users_not_copied</span> = []
  <span class="ruby-comment"># see if each user is associated with the design</span>
  <span class="ruby-comment"># if so, they are on the cc list</span>
  <span class="ruby-comment"># otherwise, they are on the not_copied list</span>
  <span class="ruby-identifier">users</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">user</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">user</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">designer_id</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">users_on_cc_list</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">user</span>)
      <span class="ruby-identifier">users_copied</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">user</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">users_not_copied</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">user</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">reviewers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">user</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  { <span class="ruby-value">:reviewers</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">reviewers_data</span>.<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">sort_by</span>   { <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">r</span>[<span class="ruby-value">:last_name</span>] },
    <span class="ruby-value">:copied</span>     =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">users_on_cc_list</span>.<span class="ruby-identifier">sort_by</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">u</span><span class="ruby-operator">|</span> <span class="ruby-identifier">u</span>.<span class="ruby-identifier">last_name</span> },
    <span class="ruby-value">:not_copied</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">users_not_copied</span>.<span class="ruby-identifier">sort_by</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">u</span><span class="ruby-operator">|</span> <span class="ruby-identifier">u</span>.<span class="ruby-identifier">last_name</span> }
  }
<span class="ruby-keyword">end</span></pre>
          </div><!-- get_mail_lists-source -->
          
        </div>

        

        
      </div><!-- get_mail_lists-method -->

    
      <div id="method-i-get_phase_design_review" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_phase_design_review</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a
href="Design.html#method-i-get_phase_design_review">#get_phase_design_review</a></p>

<p>Description: This method returns the design review identified by the
phase_id</p>

<p>Return value: A design review record if the design is not in the complete
<a href="Design.html#method-i-phase">#phase</a>. Otherwise, nil is
returned.</p>
          

          
          <div class="method-source-code" id="get_phase_design_review-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 834</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_phase_design_review</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_reviews</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">dr</span><span class="ruby-operator">|</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">phase_id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">review_type_id</span> }
<span class="ruby-keyword">end</span></pre>
          </div><!-- get_phase_design_review-source -->
          
        </div>

        

        
      </div><!-- get_phase_design_review-method -->

    
      <div id="method-i-get_role_reviewer" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_role_reviewer</span><span
            class="method-args">(role)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-get_role_reviewer">#get_role_reviewer</a></p>

<p>Description: This method returns the reviewer for the role</p>

<p>Parameters: role - record for the role of interest</p>

<p>Return value: The user record assigned to the reviewer role identified by
the  role argument.</p>
          

          
          <div class="method-source-code" id="get_role_reviewer-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1524</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_role_reviewer</span>(<span class="ruby-identifier">role</span>)
  <span class="ruby-identifier">reviewer</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_reviews</span>.<span class="ruby-identifier">sort_by</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">dr</span><span class="ruby-operator">|</span> <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">review_type</span>.<span class="ruby-identifier">sort_order</span> }.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dr</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">result</span>   = <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">design_review_results</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">drr</span><span class="ruby-operator">|</span> <span class="ruby-identifier">drr</span>.<span class="ruby-identifier">role</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">role</span> }
    <span class="ruby-identifier">reviewer</span> = <span class="ruby-identifier">result</span>.<span class="ruby-identifier">reviewer</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">result</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">return</span> <span class="ruby-identifier">reviewer</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- get_role_reviewer-source -->
          
        </div>

        

        
      </div><!-- get_role_reviewer-method -->

    
      <div id="method-i-get_role_reviewers" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            get_role_reviewers(role) &rarr; []
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Retrieve a list of users assigned to the review role for the design.</p>

<pre>Returns a list of users who have been assigned to the review role
for the design alphabetized by the last name.</pre>
          

          
          <div class="method-source-code" id="get_role_reviewers-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1543</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_role_reviewers</span>(<span class="ruby-identifier">role_name</span>)
  <span class="ruby-identifier">role</span>      = <span class="ruby-constant">Role</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-identifier">role_name</span>)
  <span class="ruby-identifier">reviewers</span> = []
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_reviews</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dr</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">result</span> = <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">design_review_results</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">drr</span><span class="ruby-operator">|</span> <span class="ruby-identifier">drr</span>.<span class="ruby-identifier">role</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">role</span> }
    <span class="ruby-identifier">reviewers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">reviewer</span> <span class="ruby-keyword">if</span>  <span class="ruby-identifier">result</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">reviewers</span>.<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">sort_by</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">reviewer</span><span class="ruby-operator">|</span> <span class="ruby-identifier">reviewer</span>.<span class="ruby-identifier">last_name</span> }
<span class="ruby-keyword">end</span></pre>
          </div><!-- get_role_reviewers-source -->
          
        </div>

        

        
      </div><!-- get_role_reviewers-method -->

    
      <div id="method-i-have_assignments" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">have_assignments</span><span
            class="method-args">(user_id)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-have_assignments">#have_assignments</a></p>

<p>Description: This method determines if the user has any outsource
instruction assignments.</p>

<p>Parameters: user_id - to identify the user</p>

<p>Return value: TRUE if the user has any outsource instruction assignments</p>
          

          
          <div class="method-source-code" id="have_assignments-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 602</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">have_assignments</span>(<span class="ruby-identifier">user_id</span>)
  
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">oi_instructions</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">instruction</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-constant">OiAssignment</span>.<span class="ruby-identifier">find_by_oi_instruction_id_and_user_id</span>(<span class="ruby-identifier">instruction</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">user_id</span>) <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  
<span class="ruby-keyword">end</span></pre>
          </div><!-- have_assignments-source -->
          
        </div>

        

        
      </div><!-- have_assignments-method -->

    
      <div id="method-i-in_phase-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">in_phase?</span><span
            class="method-args">(review_type)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-in_phase-3F">#in_phase?</a></p>

<p>Description: This method reports if the design is in the <a
href="Design.html#method-i-phase">#phase</a> identified by the review type.</p>

<p>Parameters: review_type - a review type record that represents the review</p>

<pre>type to check against.</pre>

<p>Return value: True if the design is in the same <a
href="Design.html#method-i-phase">#phase</a> as the review type, otherwise
False.</p>
          

          
          <div class="method-source-code" id="in_phase-3F-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 786</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">in_phase?</span>(<span class="ruby-identifier">review_type</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">phase_id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">review_type</span>.<span class="ruby-identifier">id</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- in_phase-3F-source -->
          
        </div>

        

        
      </div><!-- in_phase-3F-method -->

    
      <div id="method-i-inactive_reviewers-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">inactive_reviewers?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a
href="Design.html#method-i-inactive_reviewers-3F">#inactive_reviewers?</a></p>

<p>Description: This method indicates if an inactive reviewer is assigned to
perform any of the remaining reviews for the design.</p>

<p>Parameters: None</p>

<p>Return value: True if any of the remaining reviews is assigned to a user
that is inactive, otherwise False.</p>
          

          
          <div class="method-source-code" id="inactive_reviewers-3F-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1699</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">inactive_reviewers?</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">reviewers_remaining_reviews</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">r</span>.<span class="ruby-identifier">active?</span> }
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- inactive_reviewers-3F-source -->
          
        </div>

        

        
      </div><!-- inactive_reviewers-3F-method -->

    
      <div id="method-i-increment_review" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">increment_review</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-increment_review">#increment_review</a></p>

<p>Description: This method sets the <a
href="Design.html#method-i-phase">#phase</a> of the design to the next
review.</p>

<p>Parameters: None</p>

<p>Return value: None</p>
          

          
          <div class="method-source-code" id="increment_review-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1065</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">increment_review</span>

  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">phase_id</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">next_review</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">save</span>

<span class="ruby-keyword">end</span></pre>
          </div><!-- increment_review-source -->
          
        </div>

        

        
      </div><!-- increment_review-method -->

    
      <div id="method-i-input_gate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">input_gate</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-input_gate">#input_gate</a></p>

<p>Description: This method returns the user record for the <a
href="Design.html#method-i-input_gate">#input_gate</a> who is  listed for
the design.  If there is no listed <a
href="Design.html#method-i-input_gate">#input_gate</a>, a user record is
created and the <a href="Design.html#method-i-name">#name</a> is set to
â€˜Not Assignedâ€™.</p>

<p>Parameters: None</p>

<p>Return value: A <a href="User.html">User</a> record for the <a
href="Design.html#method-i-input_gate">#input_gate</a>.</p>
          

          
          <div class="method-source-code" id="input_gate-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 923</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">input_gate</span>

  <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pcb_input_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-constant">User</span>.<span class="ruby-identifier">find</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">pcb_input_id</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">User</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:first_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'Not'</span>, <span class="ruby-value">:last_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'Assigned'</span>)
  <span class="ruby-keyword">end</span>
  
<span class="ruby-keyword">end</span></pre>
          </div><!-- input_gate-source -->
          
        </div>

        

        
      </div><!-- input_gate-method -->

    
      <div id="method-i-is_active-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">is_active?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="is_active-3F-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 180</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">is_active?</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">phase_id</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">Design</span><span class="ruby-operator">::</span><span class="ruby-constant">COMPLETE</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- is_active-3F-source -->
          
        </div>

        

        
      </div><!-- is_active-3F-method -->

    
      <div id="method-i-is_role_reviewer-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">is_role_reviewer?</span><span
            class="method-args">(role, user)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-is_role_reviewer-3F">#is_role_reviewer?</a></p>

<p>Description: This method indicates if the user is assigned to perform the
review for the role</p>

<p>Parameters: role - record for the role of interest user - record for the
user of interest</p>

<p>Return value: True if the user is assigned to perform the review for the
role. Otherwise False</p>
          

          
          <div class="method-source-code" id="is_role_reviewer-3F-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1572</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">is_role_reviewer?</span>(<span class="ruby-identifier">role</span>, <span class="ruby-identifier">user</span>)
  <span class="ruby-identifier">user</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">get_role_reviewer</span>(<span class="ruby-identifier">role</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- is_role_reviewer-3F-source -->
          
        </div>

        

        
      </div><!-- is_role_reviewer-3F-method -->

    
      <div id="method-i-my_assignments" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">my_assignments</span><span
            class="method-args">(user_id)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-my_assignments">#my_assignments</a></p>

<p>Description: This method retrieves the userâ€™s outsource instruction
assignments</p>

<p>Parameters: user_id - to identify the user</p>

<p>Return value: A list of outsource instruction assignments</p>
          

          
          <div class="method-source-code" id="my_assignments-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 630</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">my_assignments</span>(<span class="ruby-identifier">user_id</span>)

  <span class="ruby-identifier">my_assignments</span>  = []    
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">oi_instructions</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">instruction</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">instruction</span>.<span class="ruby-identifier">oi_assignments</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">assignment</span><span class="ruby-operator">|</span> 
      <span class="ruby-identifier">my_assignments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">assignment</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">assignment</span>.<span class="ruby-identifier">user_id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">user_id</span> 
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  
  <span class="ruby-identifier">my_assignments</span>

<span class="ruby-keyword">end</span></pre>
          </div><!-- my_assignments-source -->
          
        </div>

        

        
      </div><!-- my_assignments-method -->

    
      <div id="method-i-name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">name</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-name">#name</a></p>

<p>Description: This method returns the design <a
href="Design.html#method-i-name">#name</a>.</p>

<p>Return value: A string that identifies the design.</p>
          

          
          <div class="method-source-code" id="name-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 851</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">name</span>
  <span class="ruby-comment">#logger.info(&quot;#################################&quot;)</span>
  <span class="ruby-comment">#logger.info(&quot;#################################&quot;)</span>
  <span class="ruby-comment">#logger.info(&quot;Design.name called&quot;)</span>
  <span class="ruby-comment">#logger.info(&quot;#################################&quot;)</span>
  <span class="ruby-comment">#logger.info(&quot;#################################&quot;)</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pcb_display</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- name-source -->
          
        </div>

        

        
      </div><!-- name-method -->

    
      <div id="method-i-new-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-new-3F">#new?</a></p>

<p>Description: This method looks at the design_type and returns TRUE if it is
set to â€˜Newâ€™.</p>

<p>Parameters: None</p>

<p>Return value: TRUE if the design is a â€˜Newâ€™ design, FALSE otherwise.</p>
          

          
          <div class="method-source-code" id="new-3F-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1022</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">new?</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_type</span> <span class="ruby-operator">==</span> <span class="ruby-string">'New'</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- new-3F-source -->
          
        </div>

        

        
      </div><!-- new-3F-method -->

    
      <div id="method-i-next_review" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">next_review</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-next_review">#next_review</a></p>

<p>Description: This method determines the next review in the review cycle.</p>

<p>Parameters: None</p>

<p>Return value: The review type id of the next review in the review cycle.</p>
          

          
          <div class="method-source-code" id="next_review-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1088</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">next_review</span>

  <span class="ruby-identifier">current_review_type</span> = <span class="ruby-constant">ReviewType</span>.<span class="ruby-identifier">find</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">phase_id</span>)
  <span class="ruby-identifier">review_types</span> = <span class="ruby-constant">ReviewType</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>,
                                 <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;active = 1 AND &quot;</span> <span class="ruby-operator">+</span>
                                                <span class="ruby-node">&quot;sort_order &gt; '#{current_review_type.sort_order}'&quot;</span>, 
                                 <span class="ruby-value">:order</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;sort_order&quot;</span>)

  <span class="ruby-identifier">phase_id</span>    = <span class="ruby-constant">COMPLETE</span>
  <span class="ruby-identifier">next_review</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">review_types</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">rt</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">next_review</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_reviews</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">dr</span><span class="ruby-operator">|</span> <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">review_type</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rt</span>.<span class="ruby-identifier">id</span> }
    <span class="ruby-keyword">break</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">next_review</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">next_review</span>.<span class="ruby-identifier">review_status</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">!=</span> <span class="ruby-string">&quot;Review Skipped&quot;</span>
  }

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">next_review</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">next_review</span>.<span class="ruby-identifier">review_status</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">!=</span> <span class="ruby-string">&quot;Review Skipped&quot;</span>
    <span class="ruby-identifier">phase_id</span> = <span class="ruby-identifier">next_review</span>.<span class="ruby-identifier">review_type_id</span>
  <span class="ruby-keyword">end</span> 
  
  <span class="ruby-identifier">phase_id</span> 

<span class="ruby-keyword">end</span></pre>
          </div><!-- next_review-source -->
          
        </div>

        

        
      </div><!-- next_review-method -->

    
      <div id="method-i-pcb_display" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">pcb_display</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="pcb_display-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1921</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pcb_display</span>
  <span class="ruby-identifier">part_num</span> = <span class="ruby-constant">PartNum</span>.<span class="ruby-identifier">get_design_pcb_part_number</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">id</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">part_num</span>
    <span class="ruby-identifier">part_num</span>.<span class="ruby-identifier">name_string</span> <span class="ruby-operator">+</span> <span class="ruby-string">' '</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">part_num</span>.<span class="ruby-identifier">rev_string</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-string">&quot;(no part number)&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- pcb_display-source -->
          
        </div>

        

        
      </div><!-- pcb_display-method -->

    
      <div id="method-i-pcb_number" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">pcb_number</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-pcb_number">#pcb_number</a></p>

<p>Description: This method returns the pcb number.</p>
          

          
          <div class="method-source-code" id="pcb_number-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1903</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pcb_number</span>
  <span class="ruby-identifier">pnum</span> = <span class="ruby-constant">PartNum</span>.<span class="ruby-identifier">get_design_pcb_part_number</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">id</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">pnum</span>
    <span class="ruby-identifier">pnum</span>.<span class="ruby-identifier">name_string</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#PartNum.get_design_pcb_part_number(self.id).name_string</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- pcb_number-source -->
          
        </div>

        

        
      </div><!-- pcb_number-method -->

    
      <div id="method-i-pcb_number-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">pcb_number?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="pcb_number-3F-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1913</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pcb_number?</span>
  <span class="ruby-constant">PartNum</span>.<span class="ruby-identifier">get_design_pcb_part_number</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">id</span>)<span class="ruby-operator">?</span><span class="ruby-keyword">true</span><span class="ruby-operator">:</span><span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- pcb_number-3F-source -->
          
        </div>

        

        
      </div><!-- pcb_number-3F-method -->

    
      <div id="method-i-pcb_rev" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">pcb_rev</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="pcb_rev-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1917</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pcb_rev</span>
  <span class="ruby-constant">PartNum</span>.<span class="ruby-identifier">get_design_pcb_part_number</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">rev_string</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- pcb_rev-source -->
          
        </div>

        

        
      </div><!-- pcb_rev-method -->

    
      <div id="method-i-pcbas_string" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">pcbas_string</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>pcba part numbers</p>

<p>Description: These methods returns the pcba part number.</p>
          

          
          <div class="method-source-code" id="pcbas_string-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1940</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pcbas_string</span>
  <span class="ruby-identifier">first</span> = <span class="ruby-value">1</span>
  <span class="ruby-identifier">pcbas</span> = <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-constant">PartNum</span>.<span class="ruby-identifier">get_design_pcba_part_numbers</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">pcba</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">first</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
      <span class="ruby-identifier">pcbas</span> = <span class="ruby-identifier">pcba</span>.<span class="ruby-identifier">name_string</span>
      <span class="ruby-identifier">first</span> = <span class="ruby-value">0</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">pcbas</span> = <span class="ruby-identifier">pcbas</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;, &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">pcba</span>.<span class="ruby-identifier">name_string</span>
    <span class="ruby-keyword">end</span>
  }
  <span class="ruby-identifier">pcbas</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- pcbas_string-source -->
          
        </div>

        

        
      </div><!-- pcbas_string-method -->

    
      <div id="method-i-peer" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">peer</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-peer">#peer</a></p>

<p>Description: This method returns the user record for the <a
href="Design.html#method-i-peer">#peer</a> who is  listed for the design. 
If there is no listed <a href="Design.html#method-i-peer">#peer</a>, a user
record is created and the <a href="Design.html#method-i-name">#name</a> is
set to â€˜Not Assignedâ€™.</p>

<p>Parameters: None</p>

<p>Return value: A <a href="User.html">User</a> record for the <a
href="Design.html#method-i-peer">#peer</a>.</p>
          

          
          <div class="method-source-code" id="peer-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 895</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">peer</span>

  <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">peer_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-constant">User</span>.<span class="ruby-identifier">find</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">peer_id</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">User</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:first_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'Not'</span>, <span class="ruby-value">:last_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'Assigned'</span>)
  <span class="ruby-keyword">end</span>

<span class="ruby-keyword">end</span></pre>
          </div><!-- peer-source -->
          
        </div>

        

        
      </div><!-- peer-method -->

    
      <div id="method-i-phase" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">phase</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-phase">#phase</a></p>

<p>Description: This method returns the review type record that represents the
<a href="Design.html#method-i-phase">#phase</a> that the design is in.  If
there is no listed <a href="Design.html#method-i-designer">#designer</a>, a
user record is created and the <a
href="Design.html#method-i-name">#name</a> is set to â€˜Not Assignedâ€™.</p>

<p>Parameters: None</p>

<p>Return value: A <a href="User.html">User</a> record for the <a
href="Design.html#method-i-designer">#designer</a>.</p>
          

          
          <div class="method-source-code" id="phase-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 808</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">phase</span>

  <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">phase_id</span> <span class="ruby-operator">==</span> <span class="ruby-constant">COMPLETE</span>
    <span class="ruby-constant">ReviewType</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'Complete'</span>)
  <span class="ruby-keyword">elsif</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">phase_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-constant">ReviewType</span>.<span class="ruby-identifier">find</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">phase_id</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">ReviewType</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'Not Started'</span>)
  <span class="ruby-keyword">end</span>

<span class="ruby-keyword">end</span></pre>
          </div><!-- phase-source -->
          
        </div>

        

        
      </div><!-- phase-method -->

    
      <div id="method-i-pnemonic_based_name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">pnemonic_based_name</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-pnemonic_based_name">#pnemonic_based_name</a></p>

<p>Description: Provides the design <a
href="Design.html#method-i-name">#name</a> using the old PCB pnemonic based
naming  convention.</p>

<p>Parameters: None</p>

<p>Return value: A string that represents the <a
href="Design.html#method-i-name">#name</a> under the old PCB pnemonic based
naming schema.</p>
          

          
          <div class="method-source-code" id="pnemonic_based_name-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1847</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pnemonic_based_name</span>
  
  <span class="ruby-identifier">base_name</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">board</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">+</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">revision</span>.<span class="ruby-identifier">name</span>
  
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">dot_rev?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">numeric_revision?</span>
    <span class="ruby-identifier">base_name</span> <span class="ruby-operator">+=</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">numeric_revision</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-keyword">end</span>
  
  <span class="ruby-identifier">base_name</span>
  
  
<span class="ruby-keyword">end</span></pre>
          </div><!-- pnemonic_based_name-source -->
          
        </div>

        

        
      </div><!-- pnemonic_based_name-method -->

    
      <div id="method-i-priority_name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">priority_name</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-priority_name">#priority_name</a></p>

<p>Description: This method returns the priority <a
href="Design.html#method-i-name">#name</a>.</p>

<p>Return value: A string that identifies the priority.</p>
          

          
          <div class="method-source-code" id="priority_name-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 873</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">priority_name</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">priority_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">priority</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">:</span> <span class="ruby-constant">NOT_SET</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- priority_name-source -->
          
        </div>

        

        
      </div><!-- priority_name-method -->

    
      <div id="method-i-record_update" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">record_update</span><span
            class="method-args">(what, old_value, new_value, user)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-record_update">#record_update</a></p>

<p>Description: This method stores the design update</p>

<p>Parameters: what      - the attribute that is being updated  user      -
the user that made the update old_value - the value of the attribute before
the update new_value - the value of the attribute afer the update</p>

<p>Return value: None</p>
          

          
          <div class="method-source-code" id="record_update-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1186</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">record_update</span>(<span class="ruby-identifier">what</span>, <span class="ruby-identifier">old_value</span>, <span class="ruby-identifier">new_value</span>, <span class="ruby-identifier">user</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_updates</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">DesignUpdate</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:what</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">what</span>, 
                                          <span class="ruby-value">:user_id</span>   =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">user</span>.<span class="ruby-identifier">id</span>,
                                          <span class="ruby-value">:old_value</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">old_value</span>,
                                          <span class="ruby-value">:new_value</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">new_value</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- record_update-source -->
          
        </div>

        

        
      </div><!-- record_update-method -->

    
      <div id="method-i-report_card_count" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">report_card_count</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-report_card_count">#report_card_count</a></p>

<p>Description: Computes the number of completed outsource instruction
assignment  report cards for the design.</p>

<p>Parameters: None</p>

<p>Return value: An integer representing the number of completed outsource 
instruction assignment report cards assigned for the design.</p>
          

          
          <div class="method-source-code" id="report_card_count-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 365</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">report_card_count</span>
  <span class="ruby-identifier">total</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">oi_instructions</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">inst</span><span class="ruby-operator">|</span> <span class="ruby-identifier">total</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">report_card_count</span> }
  <span class="ruby-identifier">total</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- report_card_count-source -->
          
        </div>

        

        
      </div><!-- report_card_count-method -->

    
      <div id="method-i-report_cards_complete-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">report_cards_complete?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a
href="Design.html#method-i-report_cards_complete-3F">#report_cards_complete?</a></p>

<p>Description: Reports on the completion status of the outsource instruction 
assignment report cards for the design.</p>

<p>Parameters: None</p>

<p>Return value: TRUE if all of the outsource instructions assignment report
cards  are complete.  Otherwise, false.</p>
          

          
          <div class="method-source-code" id="report_cards_complete-3F-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 411</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">report_cards_complete?</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">assignment_count</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">report_card_count</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- report_cards_complete-3F-source -->
          
        </div>

        

        
      </div><!-- report_cards_complete-3F-method -->

    
      <div id="method-i-reviewers" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">reviewers</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-reviewers">#reviewers</a></p>

<p>Description: This method provides a list of all of the users assigned to
perform all of the reviews for the design.</p>

<p>Parameters: None</p>

<p>Return value: A unique list of users assigned to perform all of the reviews</p>
          

          
          <div class="method-source-code" id="reviewers-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1648</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reviewers</span>
  <span class="ruby-identifier">reviewer_list</span> = []
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_reviews</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">dr</span><span class="ruby-operator">|</span> <span class="ruby-identifier">reviewer_list</span> = <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">reviewers</span>(<span class="ruby-identifier">reviewer_list</span>) }
  <span class="ruby-identifier">reviewer_list</span>.<span class="ruby-identifier">sort_by</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">last_name</span> }
<span class="ruby-keyword">end</span></pre>
          </div><!-- reviewers-source -->
          
        </div>

        

        
      </div><!-- reviewers-method -->

    
      <div id="method-i-reviewers_remaining_reviews" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">reviewers_remaining_reviews</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a
href="Design.html#method-i-reviewers_remaining_reviews">#reviewers_remaining_reviews</a></p>

<p>Description: This method provides a list of all of the users assigned to
perform all of the remaining reviews for the design.</p>

<p>Parameters: None</p>

<p>Return value: A unique list of users assigned to perform all of the reviews
for the remaining reviews.</p>
          

          
          <div class="method-source-code" id="reviewers_remaining_reviews-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1672</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reviewers_remaining_reviews</span>
  <span class="ruby-identifier">reviewer_list</span> = []
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_reviews</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dr</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">review_status</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-string">'Review Completed'</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">review_status</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-string">'Review Skipped'</span>
    <span class="ruby-identifier">reviewer_list</span> = <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">reviewers</span>(<span class="ruby-identifier">reviewer_list</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">reviewer_list</span>.<span class="ruby-identifier">sort_by</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">last_name</span> }
<span class="ruby-keyword">end</span></pre>
          </div><!-- reviewers_remaining_reviews-source -->
          
        </div>

        

        
      </div><!-- reviewers_remaining_reviews-method -->

    
      <div id="method-i-role_open_review_count" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">role_open_review_count</span><span
            class="method-args">(role)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a
href="Design.html#method-i-role_open_review_count">#role_open_review_count</a></p>

<p>Description: This method returns the count of the number of open reviews
assigned to the role over all of the design reviews for the design.</p>

<p>Parameters: role - record for the role of interest</p>

<p>Return value: The number of roles that have been assigned in all of the
designâ€™s reviews that are open.</p>
          

          
          <div class="method-source-code" id="role_open_review_count-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1496</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">role_open_review_count</span>(<span class="ruby-identifier">role</span>)
  <span class="ruby-identifier">open_reviews</span>   = <span class="ruby-value">0</span>
  <span class="ruby-identifier">closed_reviews</span> = <span class="ruby-constant">ReviewStatus</span>.<span class="ruby-identifier">closed_reviews</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_reviews</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dr</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">closed_reviews</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">rvw</span><span class="ruby-operator">|</span> <span class="ruby-identifier">rvw</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">review_status</span> }
    <span class="ruby-identifier">review_result</span> = <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">design_review_results</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">drr</span><span class="ruby-operator">|</span> <span class="ruby-identifier">drr</span>.<span class="ruby-identifier">role_id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">role</span>.<span class="ruby-identifier">id</span> }
    <span class="ruby-identifier">open_reviews</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">review_result</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-constant">COMPLETED_RESULTS</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">review_result</span>.<span class="ruby-identifier">result</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">open_reviews</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- role_open_review_count-source -->
          
        </div>

        

        
      </div><!-- role_open_review_count-method -->

    
      <div id="method-i-role_review_count" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">role_review_count</span><span
            class="method-args">(role)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-role_review_count">#role_review_count</a></p>

<p>Description: This method returns the count of the number of reviews
assigned to the role over all of the design reviews for the design.</p>

<p>Parameters: role - record for the role of interest</p>

<p>Return value: The number of roles that have been assigned in all of the
designâ€™s reviews.</p>
          

          
          <div class="method-source-code" id="role_review_count-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1470</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">role_review_count</span>(<span class="ruby-identifier">role</span>)
  <span class="ruby-identifier">role_count</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_reviews</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dr</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">role_count</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">design_review_results</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">drr</span><span class="ruby-operator">|</span> <span class="ruby-identifier">drr</span>.<span class="ruby-identifier">role_id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">role</span>.<span class="ruby-identifier">id</span> }
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">role_count</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- role_review_count-source -->
          
        </div>

        

        
      </div><!-- role_review_count-method -->

    
      <div id="method-i-set_design_center" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">set_design_center</span><span
            class="method-args">(design_center, user)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>JPA</p>

<pre>set_design_center

Description:
This method updates the design center attribute and records the
update.

Parameters:
design_center - the new value for the design center attribute
user          - the user who made the update

Return value:
The old design center name if the design center was updated.
Otherwise, nil</pre>
          

          
          <div class="method-source-code" id="set_design_center-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1878</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">set_design_center</span>(<span class="ruby-identifier">design_center</span>, <span class="ruby-identifier">user</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">design_center</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_center_id</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">design_center</span>.<span class="ruby-identifier">id</span>
    <span class="ruby-identifier">old_design_center_name</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_center_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_center</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">:</span> <span class="ruby-string">'Not Set'</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">record_update</span>(<span class="ruby-string">'Design Center'</span>,
                       <span class="ruby-identifier">old_design_center_name</span>,
                       <span class="ruby-identifier">design_center</span>.<span class="ruby-identifier">name</span>,
                       <span class="ruby-identifier">user</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_center</span> = <span class="ruby-identifier">design_center</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">old_design_center_name</span>

<span class="ruby-keyword">end</span></pre>
          </div><!-- set_design_center-source -->
          
        </div>

        

        
      </div><!-- set_design_center-method -->

    
      <div id="method-i-set_reviewer" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            set_reviewer(role, user) &rarr; nil
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Set the reviewer for the design reviews with incomplete results for the 
role.</p>

<pre>For each of the design reviews associated with the design, set the reviewer
for the specified role.</pre>

<p>Exception</p>

<pre>ArgumentError - indicates that the user is not a member of the group (role).</pre>
          

          
          <div class="method-source-code" id="set_reviewer-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1446</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">set_reviewer</span>(<span class="ruby-identifier">role</span>, <span class="ruby-identifier">user</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_reviews</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">dr</span><span class="ruby-operator">|</span> <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">set_reviewer</span>(<span class="ruby-identifier">role</span>, <span class="ruby-identifier">user</span>) }
<span class="ruby-keyword">rescue</span>
  <span class="ruby-identifier">raise</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- set_reviewer-source -->
          
        </div>

        

        
      </div><!-- set_reviewer-method -->

    
      <div id="method-i-set_role_reviewer" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">set_role_reviewer</span><span
            class="method-args">(role, new_reviewer, user)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-set_role_reviewer">#set_role_reviewer</a></p>

<p>Description: This method updates the design review result with a new
reviewer.</p>

<p>Parameters: role         - record for the role that is being updated
new_reviewer - record for the user that will be assigned to</p>

<pre>perform the review for the role</pre>

<p>user         - record for the user that is performing the update</p>

<p>Return value: Nil if no role was updated, otherwise the review type <a
href="Design.html#method-i-name">#name</a> of the last design review that
was updated.</p>
          

          
          <div class="method-source-code" id="set_role_reviewer-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1596</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">set_role_reviewer</span>(<span class="ruby-identifier">role</span>, <span class="ruby-identifier">new_reviewer</span>, <span class="ruby-identifier">user</span>)

  <span class="ruby-identifier">completed_results</span> = [<span class="ruby-string">'APPROVED'</span>, <span class="ruby-string">'WAIVED'</span>]
  <span class="ruby-identifier">in_review</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_reviews</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dr</span><span class="ruby-operator">|</span>

    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">review_status</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-string">'Review Completed'</span>

    <span class="ruby-identifier">review_result</span> = <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">design_review_results</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">drr</span><span class="ruby-operator">|</span> <span class="ruby-identifier">drr</span>.<span class="ruby-identifier">role_id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">role</span>.<span class="ruby-identifier">id</span> }
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">review_result</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">completed_results</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">review_result</span>.<span class="ruby-identifier">result</span>)
      <span class="ruby-identifier">old_reviewer</span>              = <span class="ruby-identifier">review_result</span>.<span class="ruby-identifier">reviewer</span>
      <span class="ruby-identifier">review_result</span>.<span class="ruby-identifier">reviewer_id</span> = <span class="ruby-identifier">new_reviewer</span>.<span class="ruby-identifier">id</span>
      <span class="ruby-identifier">review_result</span>.<span class="ruby-identifier">save</span>

      <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">record_update</span>(<span class="ruby-identifier">role</span>.<span class="ruby-identifier">display_name</span> <span class="ruby-operator">+</span> <span class="ruby-string">' Reviewer'</span>, 
                       <span class="ruby-identifier">old_reviewer</span>.<span class="ruby-identifier">name</span>,
                       <span class="ruby-identifier">new_reviewer</span>.<span class="ruby-identifier">name</span>,
                       <span class="ruby-identifier">user</span>)

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">review_status</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-string">'In Review'</span>
        <span class="ruby-constant">TrackerMailer</span><span class="ruby-operator">::</span><span class="ruby-identifier">reviewer_modification_notification</span>(<span class="ruby-identifier">dr</span>, 
          <span class="ruby-identifier">role</span>,
          <span class="ruby-identifier">old_reviewer</span>,
          <span class="ruby-identifier">new_reviewer</span>,
          <span class="ruby-identifier">user</span>).<span class="ruby-identifier">deliver</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">in_review</span> = <span class="ruby-identifier">dr</span>.<span class="ruby-identifier">review_type</span>.<span class="ruby-identifier">name</span>
    <span class="ruby-keyword">end</span>
    
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">in_review</span>
  
<span class="ruby-keyword">end</span></pre>
          </div><!-- set_role_reviewer-source -->
          
        </div>

        

        
      </div><!-- set_role_reviewer-method -->

    
      <div id="method-i-setup_design_reviews" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">setup_design_reviews</span><span
            class="method-args">(review_types_list, board_team_list)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a
href="Design.html#method-i-setup_design_reviews">#setup_design_reviews</a></p>

<p>Description: This method sets up the design reviews.</p>

<p>Parameters: review_types_list - a hash of flags accessed by review type <a
href="Design.html#method-i-name">#name</a></p>

<pre>that indicate if the review type is active</pre>

<p>board_team_list   - a collection of users that are on the board team</p>

<p>Return value: None</p>
          

          
          <div class="method-source-code" id="setup_design_reviews-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1129</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">setup_design_reviews</span>(<span class="ruby-identifier">review_types_list</span>, 
                         <span class="ruby-identifier">board_team_list</span>)
                         
  <span class="ruby-identifier">not_started</span>    = <span class="ruby-constant">ReviewStatus</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-string">'Not Started'</span>)
  <span class="ruby-identifier">review_skipped</span> = <span class="ruby-constant">ReviewStatus</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-string">'Review Skipped'</span>)
  <span class="ruby-identifier">review_types</span>   = <span class="ruby-constant">ReviewType</span>.<span class="ruby-identifier">get_active_review_types</span>

  <span class="ruby-comment">#Find the ECN Manager for the design</span>
  <span class="ruby-identifier">ecn_manager_role</span> = <span class="ruby-constant">Role</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-string">&quot;ECN&quot;</span>)
  <span class="ruby-identifier">ecn_manager</span> = <span class="ruby-identifier">board_team_list</span>.<span class="ruby-identifier">detect</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">x</span>.<span class="ruby-identifier">role_id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">ecn_manager_role</span>.<span class="ruby-identifier">id</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment">#Go through each of the review types and setup a review.</span>
  <span class="ruby-identifier">review_types_list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">review</span>, <span class="ruby-identifier">active</span><span class="ruby-operator">|</span>

    <span class="ruby-identifier">review_type</span> = <span class="ruby-identifier">review_types</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">rt</span><span class="ruby-operator">|</span> <span class="ruby-identifier">rt</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">review</span> }
    
    <span class="ruby-identifier">design_review</span> = <span class="ruby-constant">DesignReview</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:review_type_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">review_type</span>.<span class="ruby-identifier">id</span>,
                                     <span class="ruby-value">:creator_id</span>     =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">created_by</span>,
                                     <span class="ruby-value">:priority_id</span>    =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">priority_id</span>)
    <span class="ruby-identifier">design_review</span>.<span class="ruby-identifier">review_status_id</span> = <span class="ruby-identifier">active</span> <span class="ruby-operator">==</span> <span class="ruby-string">'1'</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">not_started</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">review_skipped</span>.<span class="ruby-identifier">id</span>
    
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">review_type</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;Pre-Artwork&quot;</span>
      <span class="ruby-identifier">design_review</span>.<span class="ruby-identifier">designer_id</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pcb_input_id</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">review_type</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-string">'Release'</span>
      <span class="ruby-identifier">design_review</span>.<span class="ruby-identifier">designer_id</span> = <span class="ruby-identifier">ecn_manager</span>.<span class="ruby-identifier">user_id</span>
    <span class="ruby-keyword">end</span>
    
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_reviews</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">design_review</span>

    <span class="ruby-comment"># Create Design Review Result entries</span>
    <span class="ruby-identifier">design_review</span>.<span class="ruby-identifier">add_reviewers</span>(<span class="ruby-identifier">board_team_list</span>)

  <span class="ruby-keyword">end</span>

<span class="ruby-keyword">end</span></pre>
          </div><!-- setup_design_reviews-source -->
          
        </div>

        

        
      </div><!-- setup_design_reviews-method -->

    
      <div id="method-i-subject_prefix" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">subject_prefix</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="Design.html#method-i-subject_prefix">#subject_prefix</a></p>

<p>Description: Provides a common prefix for subjects</p>

<p>Parameters:</p>

<pre>None</pre>
          

          
          <div class="method-source-code" id="subject_prefix-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1966</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">subject_prefix</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">board</span>.<span class="ruby-identifier">platform</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">+</span> <span class="ruby-string">'/'</span> <span class="ruby-operator">+</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">board</span>.<span class="ruby-identifier">project</span>.<span class="ruby-identifier">name</span>  <span class="ruby-operator">+</span> <span class="ruby-string">'/'</span> <span class="ruby-operator">+</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">board</span>.<span class="ruby-identifier">description</span>   <span class="ruby-operator">+</span> <span class="ruby-string">'('</span> <span class="ruby-operator">+</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">directory_name</span>      <span class="ruby-operator">+</span>  <span class="ruby-string">'): '</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- subject_prefix-source -->
          
        </div>

        

        
      </div><!-- subject_prefix-method -->

    
      <div id="method-i-surfboards_path" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">surfboards_path</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="surfboards_path-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 220</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">surfboards_path</span>
  <span class="ruby-node">&quot;/surfboards/#{self.design_center.pcb_path}/#{self.directory_name}/&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- surfboards_path-source -->
          
        </div>

        

        
      </div><!-- surfboards_path-method -->

    
      <div id="method-i-total_approved_schedule_change_count" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            total_approved_schedule_change_count() &rarr; integer
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>The number of approved changes that have been applied to the original
schedule.</p>
          

          
          <div class="method-source-code" id="total_approved_schedule_change_count-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 264</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">total_approved_schedule_change_count</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_changes</span>.<span class="ruby-identifier">count</span>(<span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;approved=true&quot;</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- total_approved_schedule_change_count-source -->
          
        </div>

        

        
      </div><!-- total_approved_schedule_change_count-method -->

    
      <div id="method-i-total_approved_schedule_changes-3F" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            total_approved_schedule_changes?() &rarr; boolean
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Indicate if there are any approved schedule changes for the design</p>
          

          
          <div class="method-source-code" id="total_approved_schedule_changes-3F-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 274</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">total_approved_schedule_changes?</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">total_approved_schedule_change_count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- total_approved_schedule_changes-3F-source -->
          
        </div>

        

        
      </div><!-- total_approved_schedule_changes-3F-method -->

    
      <div id="method-i-total_approved_schedule_impact_hours" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            total_approved_schedule_impact_hours() &rarr; float
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Provide the number of approved hours of adjustment that have been applied
to the schedule.</p>
          

          
          <div class="method-source-code" id="total_approved_schedule_impact_hours-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 230</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">total_approved_schedule_impact_hours</span>
  <span class="ruby-identifier">delta</span>  = <span class="ruby-value">0.0</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_changes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">design_change</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">design_change</span>.<span class="ruby-identifier">approved?</span>
      <span class="ruby-identifier">delta</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">design_change</span>.<span class="ruby-identifier">schedule_impact</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">delta</span>
 <span class="ruby-keyword">end</span></pre>
          </div><!-- total_approved_schedule_impact_hours-source -->
          
        </div>

        

        
      </div><!-- total_approved_schedule_impact_hours-method -->

    
      <div id="method-i-total_pending_schedule_change_count" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            total_pending_schedule_change_count() &rarr; integer
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>The number of pending changes that have been applied to the original
schedule.</p>
          

          
          <div class="method-source-code" id="total_pending_schedule_change_count-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 285</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">total_pending_schedule_change_count</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_changes</span>.<span class="ruby-identifier">count</span>(<span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;approved=false&quot;</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- total_pending_schedule_change_count-source -->
          
        </div>

        

        
      </div><!-- total_pending_schedule_change_count-method -->

    
      <div id="method-i-total_pending_schedule_changes-3F" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            total_pending_schedule_changes?() &rarr; boolean
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Indicate if there are any pending schedule changes for the design</p>
          

          
          <div class="method-source-code" id="total_pending_schedule_changes-3F-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 295</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">total_pending_schedule_changes?</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">total_pending_schedule_change_count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- total_pending_schedule_changes-3F-source -->
          
        </div>

        

        
      </div><!-- total_pending_schedule_changes-3F-method -->

    
      <div id="method-i-total_pending_schedule_impact_hours" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            total_pending_schedule_impact_hours() &rarr; float
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Provide the number of pending hours of adjustment that have been applied to
the schedule.</p>
          

          
          <div class="method-source-code" id="total_pending_schedule_impact_hours-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 247</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">total_pending_schedule_impact_hours</span>
 <span class="ruby-identifier">delta</span>  = <span class="ruby-value">0.0</span>
 <span class="ruby-keyword">self</span>.<span class="ruby-identifier">design_changes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">design_change</span><span class="ruby-operator">|</span>
   <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">design_change</span>.<span class="ruby-identifier">approved?</span>
     <span class="ruby-identifier">delta</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">design_change</span>.<span class="ruby-identifier">schedule_impact</span>
   <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">delta</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- total_pending_schedule_impact_hours-source -->
          
        </div>

        

        
      </div><!-- total_pending_schedule_impact_hours-method -->

    
      <div id="method-i-update_valor_reviewer" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">update_valor_reviewer</span><span
            class="method-args">(peer, user)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a
href="Design.html#method-i-update_valor_reviewer">#update_valor_reviewer</a></p>

<p>Description: This method updates the person assigned to perform the valor
review</p>

<p>Parameters: <a href="Design.html#method-i-peer">#peer</a> - the user record
for the new <a href="Design.html#method-i-peer">#peer</a> reviewer user -
the user that made the update</p>

<p>Return value: TRUE if the Valor reviewer was updated.</p>
          

          
          <div class="method-source-code" id="update_valor_reviewer-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1210</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">update_valor_reviewer</span>(<span class="ruby-identifier">peer</span>, <span class="ruby-identifier">user</span>)

  <span class="ruby-identifier">updated</span>      = <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">final_review</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">get_design_review</span>(<span class="ruby-string">'Final'</span>)

  <span class="ruby-comment"># TO DO: This really should be a method in design_review</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">final_review</span>.<span class="ruby-identifier">review_status</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">!=</span> <span class="ruby-string">&quot;Review Completed&quot;</span>
  
    <span class="ruby-identifier">valor_review_result</span> = <span class="ruby-identifier">final_review</span>.<span class="ruby-identifier">get_review_result</span>(<span class="ruby-string">'Valor'</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">valor_review_result</span>.<span class="ruby-identifier">reviewer_id</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">peer</span>.<span class="ruby-identifier">id</span>
      <span class="ruby-identifier">final_review</span>.<span class="ruby-identifier">record_update</span>(<span class="ruby-string">'Valor Reviewer'</span>,
                                 <span class="ruby-identifier">valor_review_result</span>.<span class="ruby-identifier">reviewer</span>.<span class="ruby-identifier">name</span>,
                                 <span class="ruby-identifier">peer</span>.<span class="ruby-identifier">name</span>,
                                 <span class="ruby-identifier">user</span>)
      <span class="ruby-identifier">valor_review_result</span>.<span class="ruby-identifier">reviewer_id</span> = <span class="ruby-identifier">peer_id</span>
      <span class="ruby-identifier">valor_review_result</span>.<span class="ruby-identifier">save</span>
      
      <span class="ruby-identifier">updated</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">updated</span>

<span class="ruby-keyword">end</span></pre>
          </div><!-- update_valor_reviewer-source -->
          
        </div>

        

        
      </div><!-- update_valor_reviewer-method -->

    
      <div id="method-i-work_assignments_complete-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">work_assignments_complete?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>work_assignments_complete</p>

<p>Description: This method determines if all of the work assignment have been
completed and evaluated by the <a
href="Design.html#method-i-designer">#designer</a>.</p>

<p>Parameters: None</p>

<p>Return value: A boolean that indicates that all work assignments have been
completed and have been evaluated when TRUE.</p>
          

          
          <div class="method-source-code" id="work_assignments_complete-3F-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 433</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">work_assignments_complete?</span>
  ( <span class="ruby-keyword">self</span>.<span class="ruby-identifier">assignments_complete?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">report_cards_complete?</span> )
<span class="ruby-keyword">end</span></pre>
          </div><!-- work_assignments_complete-3F-source -->
          
        </div>

        

        
      </div><!-- work_assignments_complete-3F-method -->

    
    </section><!-- public-instance-method-details -->
  
     <section id="private-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Private Instance Methods</h3>

    
      <div id="method-i-modification_comment" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">modification_comment</span><span
            class="method-args">(post_comment, changes)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a
href="Design.html#method-i-modification_comment">#modification_comment</a></p>

<p>Description: This method creates the comment for design modifications made
by the managers and designers</p>

<p>Parameters post_comment  - the associated comment entered by the user
changes       - contains the modifications that were made to the</p>

<pre>design review</pre>
          

          
          <div class="method-source-code" id="modification_comment-source">
            <pre><span class="ruby-comment"># File app/models/design.rb, line 1995</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">modification_comment</span>(<span class="ruby-identifier">post_comment</span>, <span class="ruby-identifier">changes</span>)

  <span class="ruby-identifier">msg</span> = <span class="ruby-string">''</span>
  
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">changes</span>[<span class="ruby-value">:designer</span>]
    <span class="ruby-identifier">msg</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;The Lead Designer was changed from #{changes[:designer][:old]} to #{changes[:designer][:new]}\n&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">changes</span>[<span class="ruby-value">:peer</span>]
    <span class="ruby-identifier">msg</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;The Peer Auditor was changed from #{changes[:peer][:old]} to #{changes[:peer][:new]}\n&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">changes</span>[<span class="ruby-value">:pcb_input_gate</span>]
    <span class="ruby-identifier">msg</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;The PCB Input Gate was changed from #{changes[:pcb_input_gate][:old]} to #{changes[:pcb_input_gate][:new]}\n&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">changes</span>[<span class="ruby-value">:release_poster</span>]
    <span class="ruby-identifier">msg</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;The Release Poster was changed from #{changes[:release_poster][:old]} to #{changes[:release_poster][:new]}\n&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">changes</span>[<span class="ruby-value">:criticality</span>]
    <span class="ruby-identifier">msg</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;The Criticality was changed from #{changes[:criticality][:old]} to #{changes[:criticality][:new]}\n&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">changes</span>[<span class="ruby-value">:design_center</span>]
    <span class="ruby-identifier">msg</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;The Design Center was changed from #{changes[:design_center][:old]} to #{changes[:design_center][:new]}\n&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">changes</span>[<span class="ruby-value">:review_status</span>]
    <span class="ruby-identifier">msg</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;The design review status was changed from #{changes[:review_status][:old]} to #{changes[:review_status][:new]}\n&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">changes</span>[<span class="ruby-value">:ecn_number</span>]
    <span class="ruby-identifier">msg</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;The ECN number was changed from #{changes[:ecn_number][:old]} to #{changes[:ecn_number][:new]}\n&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">msg</span> <span class="ruby-operator">+=</span> <span class="ruby-string">&quot;\n\n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">post_comment</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">post_comment</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
  
  <span class="ruby-identifier">msg</span>

<span class="ruby-keyword">end</span></pre>
          </div><!-- modification_comment-source -->
          
        </div>

        

        
      </div><!-- modification_comment-method -->

    
    </section><!-- private-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.11.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

