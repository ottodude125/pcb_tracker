<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>Class: User</title>

<link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script type="text/javascript" charset="utf-8" src="./js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="./index.html">Home</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>app/models/user.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link">ActiveRecord::Base
  
</nav>

    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-c-authenticate">::authenticate</a>
    
    <li><a href="#method-c-sha1">::sha1</a>
    
    <li><a href="#method-i-active_role">#active_role</a>
    
    <li><a href="#method-i-active_role-3D">#active_role=</a>
    
    <li><a href="#method-i-alpha_char">#alpha_char</a>
    
    <li><a href="#method-i-crypt_password">#crypt_password</a>
    
    <li><a href="#method-i-crypt_unless_empty">#crypt_unless_empty</a>
    
    <li><a href="#method-i-designer_role">#designer_role</a>
    
    <li><a href="#method-i-has_access-3F">#has_access?</a>
    
    <li><a href="#method-i-is_a_role_member-3F">#is_a_role_member?</a>
    
    <li><a href="#method-i-is_an_lcr_designer-3F">#is_an_lcr_designer?</a>
    
    <li><a href="#method-i-is_designer-3F">#is_designer?</a>
    
    <li><a href="#method-i-is_manager-3F">#is_manager?</a>
    
    <li><a href="#method-i-is_pcb_admin-3F">#is_pcb_admin?</a>
    
    <li><a href="#method-i-is_pcb_management-3F">#is_pcb_management?</a>
    
    <li><a href="#method-i-is_reviewer-3F">#is_reviewer?</a>
    
    <li><a href="#method-i-is_tracker_admin-3F">#is_tracker_admin?</a>
    
    <li><a href="#method-i-last_name_first">#last_name_first</a>
    
    <li><a href="#method-i-name">#name</a>
    
    <li><a href="#method-i-pcb_admin_role">#pcb_admin_role</a>
    
    <li><a href="#method-i-pcb_management_role">#pcb_management_role</a>
    
    <li><a href="#method-i-reviewer_role">#reviewer_role</a>
    
    <li><a href="#method-i-save_division">#save_division</a>
    
    <li><a href="#method-i-save_location">#save_location</a>
    
    <li><a href="#method-i-tracker_admin_role">#tracker_admin_role</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="./doc/README_FOR_APP.html">README_FOR_APP</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="./AdminController.html">AdminController</a>
  
    <li><a href="./ApplicationController.html">ApplicationController</a>
  
    <li><a href="./ApplicationHelper.html">ApplicationHelper</a>
  
    <li><a href="./Audit.html">Audit</a>
  
    <li><a href="./AuditComment.html">AuditComment</a>
  
    <li><a href="./AuditController.html">AuditController</a>
  
    <li><a href="./AuditMailer.html">AuditMailer</a>
  
    <li><a href="./AuditTeammate.html">AuditTeammate</a>
  
    <li><a href="./Board.html">Board</a>
  
    <li><a href="./BoardController.html">BoardController</a>
  
    <li><a href="./BoardDesignEntry.html">BoardDesignEntry</a>
  
    <li><a href="./BoardDesignEntryController.html">BoardDesignEntryController</a>
  
    <li><a href="./BoardDesignEntryMailer.html">BoardDesignEntryMailer</a>
  
    <li><a href="./BoardDesignEntryUser.html">BoardDesignEntryUser</a>
  
    <li><a href="./BoardHelper.html">BoardHelper</a>
  
    <li><a href="./BoardReviewer.html">BoardReviewer</a>
  
    <li><a href="./CcListHistory.html">CcListHistory</a>
  
    <li><a href="./ChangeClass.html">ChangeClass</a>
  
    <li><a href="./ChangeClassesController.html">ChangeClassesController</a>
  
    <li><a href="./ChangeDetail.html">ChangeDetail</a>
  
    <li><a href="./ChangeDetailsController.html">ChangeDetailsController</a>
  
    <li><a href="./ChangeItem.html">ChangeItem</a>
  
    <li><a href="./ChangeItemsController.html">ChangeItemsController</a>
  
    <li><a href="./ChangeType.html">ChangeType</a>
  
    <li><a href="./ChangeTypesController.html">ChangeTypesController</a>
  
    <li><a href="./Check.html">Check</a>
  
    <li><a href="./CheckController.html">CheckController</a>
  
    <li><a href="./Checklist.html">Checklist</a>
  
    <li><a href="./ChecklistController.html">ChecklistController</a>
  
    <li><a href="./ChecklistHelper.html">ChecklistHelper</a>
  
    <li><a href="./CoreExtensions.html">CoreExtensions</a>
  
    <li><a href="./DbCheck.html">DbCheck</a>
  
    <li><a href="./DebugController.html">DebugController</a>
  
    <li><a href="./DebugHelper.html">DebugHelper</a>
  
    <li><a href="./Design.html">Design</a>
  
    <li><a href="./DesignCenter.html">DesignCenter</a>
  
    <li><a href="./DesignCenterController.html">DesignCenterController</a>
  
    <li><a href="./DesignCenterManagerController.html">DesignCenterManagerController</a>
  
    <li><a href="./DesignChange.html">DesignChange</a>
  
    <li><a href="./DesignChangesController.html">DesignChangesController</a>
  
    <li><a href="./DesignChangesHelper.html">DesignChangesHelper</a>
  
    <li><a href="./DesignCheck.html">DesignCheck</a>
  
    <li><a href="./DesignController.html">DesignController</a>
  
    <li><a href="./DesignDirectory.html">DesignDirectory</a>
  
    <li><a href="./DesignDirectoryController.html">DesignDirectoryController</a>
  
    <li><a href="./DesignPcbasHelper.html">DesignPcbasHelper</a>
  
    <li><a href="./DesignReview.html">DesignReview</a>
  
    <li><a href="./DesignReviewComment.html">DesignReviewComment</a>
  
    <li><a href="./DesignReviewController.html">DesignReviewController</a>
  
    <li><a href="./DesignReviewDocument.html">DesignReviewDocument</a>
  
    <li><a href="./DesignReviewHelper.html">DesignReviewHelper</a>
  
    <li><a href="./DesignReviewMailer.html">DesignReviewMailer</a>
  
    <li><a href="./DesignReviewResult.html">DesignReviewResult</a>
  
    <li><a href="./DesignReviewResultController.html">DesignReviewResultController</a>
  
    <li><a href="./DesignUpdate.html">DesignUpdate</a>
  
    <li><a href="./DesignUpdateController.html">DesignUpdateController</a>
  
    <li><a href="./Division.html">Division</a>
  
    <li><a href="./DivisionController.html">DivisionController</a>
  
    <li><a href="./Document.html">Document</a>
  
    <li><a href="./DocumentController.html">DocumentController</a>
  
    <li><a href="./DocumentMailer.html">DocumentMailer</a>
  
    <li><a href="./DocumentType.html">DocumentType</a>
  
    <li><a href="./DocumentTypeController.html">DocumentTypeController</a>
  
    <li><a href="./EcoComment.html">EcoComment</a>
  
    <li><a href="./EcoDocument.html">EcoDocument</a>
  
    <li><a href="./EcoDocumentsController.html">EcoDocumentsController</a>
  
    <li><a href="./EcoTask.html">EcoTask</a>
  
    <li><a href="./EcoTaskMailer.html">EcoTaskMailer</a>
  
    <li><a href="./EcoTaskReportsController.html">EcoTaskReportsController</a>
  
    <li><a href="./EcoTasksController.html">EcoTasksController</a>
  
    <li><a href="./EcoType.html">EcoType</a>
  
    <li><a href="./FabHouse.html">FabHouse</a>
  
    <li><a href="./FabHouseController.html">FabHouseController</a>
  
    <li><a href="./FtpNotification.html">FtpNotification</a>
  
    <li><a href="./IncomingDirectory.html">IncomingDirectory</a>
  
    <li><a href="./IncomingDirectoryController.html">IncomingDirectoryController</a>
  
    <li><a href="./IpdPost.html">IpdPost</a>
  
    <li><a href="./IpdPostHelper.html">IpdPostHelper</a>
  
    <li><a href="./Location.html">Location</a>
  
    <li><a href="./LocationController.html">LocationController</a>
  
    <li><a href="./LoginSystem.html">LoginSystem</a>
  
    <li><a href="./MailerMethods.html">MailerMethods</a>
  
    <li><a href="./OiAssignment.html">OiAssignment</a>
  
    <li><a href="./OiAssignmentComment.html">OiAssignmentComment</a>
  
    <li><a href="./OiAssignmentReport.html">OiAssignmentReport</a>
  
    <li><a href="./OiCategory.html">OiCategory</a>
  
    <li><a href="./OiCategorySection.html">OiCategorySection</a>
  
    <li><a href="./OiInstruction.html">OiInstruction</a>
  
    <li><a href="./OiInstructionController.html">OiInstructionController</a>
  
    <li><a href="./OiInstructionHelper.html">OiInstructionHelper</a>
  
    <li><a href="./OiInstructionMailer.html">OiInstructionMailer</a>
  
    <li><a href="./PartNum.html">PartNum</a>
  
    <li><a href="./PartNumber.html">PartNumber</a>
  
    <li><a href="./PartNumsController.html">PartNumsController</a>
  
    <li><a href="./PartNumsHelper.html">PartNumsHelper</a>
  
    <li><a href="./Pcbtr.html">Pcbtr</a>
  
    <li><a href="./Ping.html">Ping</a>
  
    <li><a href="./PingMailer.html">PingMailer</a>
  
    <li><a href="./Platform.html">Platform</a>
  
    <li><a href="./PlatformController.html">PlatformController</a>
  
    <li><a href="./PostingTimestamp.html">PostingTimestamp</a>
  
    <li><a href="./Prefix.html">Prefix</a>
  
    <li><a href="./PrefixController.html">PrefixController</a>
  
    <li><a href="./Priority.html">Priority</a>
  
    <li><a href="./PriorityController.html">PriorityController</a>
  
    <li><a href="./ProductType.html">ProductType</a>
  
    <li><a href="./ProductTypeController.html">ProductTypeController</a>
  
    <li><a href="./Project.html">Project</a>
  
    <li><a href="./ProjectController.html">ProjectController</a>
  
    <li><a href="./ReportController.html">ReportController</a>
  
    <li><a href="./ReportHelper.html">ReportHelper</a>
  
    <li><a href="./ReviewGroup.html">ReviewGroup</a>
  
    <li><a href="./ReviewGroupController.html">ReviewGroupController</a>
  
    <li><a href="./ReviewManagerController.html">ReviewManagerController</a>
  
    <li><a href="./ReviewStatus.html">ReviewStatus</a>
  
    <li><a href="./ReviewStatusController.html">ReviewStatusController</a>
  
    <li><a href="./ReviewType.html">ReviewType</a>
  
    <li><a href="./ReviewTypeController.html">ReviewTypeController</a>
  
    <li><a href="./Revision.html">Revision</a>
  
    <li><a href="./Role.html">Role</a>
  
    <li><a href="./RoleController.html">RoleController</a>
  
    <li><a href="./Section.html">Section</a>
  
    <li><a href="./SectionController.html">SectionController</a>
  
    <li><a href="./SessionCleaner.html">SessionCleaner</a>
  
    <li><a href="./Subsection.html">Subsection</a>
  
    <li><a href="./SubsectionController.html">SubsectionController</a>
  
    <li><a href="./TimeHelper.html">TimeHelper</a>
  
    <li><a href="./TrackerController.html">TrackerController</a>
  
    <li><a href="./TrackerFix.html">TrackerFix</a>
  
    <li><a href="./TrackerHelper.html">TrackerHelper</a>
  
    <li><a href="./TrackerMailer.html">TrackerMailer</a>
  
    <li><a href="./User.html">User</a>
  
    <li><a href="./UserController.html">UserController</a>
  
    <li><a href="./UserLogin.html">UserLogin</a>
  
    <li><a href="./UserMailer.html">UserMailer</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class User</h1>

  <div id="description" class="description">
    
<p>this model expects a certain database layout and its based on the <a
href="User.html#method-i-name">#name</a>/login pattern.</p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-authenticate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">authenticate</span><span
            class="method-args">(login, pass)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Authenticate a user.</p>

<p>Example:</p>

<pre>@user = User.authenticate('bob', 'bobpass')</pre>
          

          
          <div class="method-source-code" id="authenticate-source">
            <pre><span class="ruby-comment"># File app/models/user.rb, line 51</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">authenticate</span>(<span class="ruby-identifier">login</span>, <span class="ruby-identifier">pass</span>)
  <span class="ruby-comment">#logger.info &quot;********** AUTHENTICATE ************&quot;</span>
  <span class="ruby-comment">#logger.info &quot;    Login:            #{login}&quot;</span>
  <span class="ruby-comment">#logger.info &quot;    Password:         #{pass}&quot;</span>
  <span class="ruby-comment">#logger.info &quot;    Password(salted): #{sha1(pass)}&quot;</span>
  <span class="ruby-keyword">if</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">env</span>.<span class="ruby-identifier">development?</span>
     <span class="ruby-identifier">find_by_login</span>(<span class="ruby-identifier">login</span>)
  <span class="ruby-keyword">else</span>
     <span class="ruby-identifier">find_by_login_and_password</span>(<span class="ruby-identifier">login</span>, <span class="ruby-identifier">sha1</span>(<span class="ruby-identifier">pass</span>))
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- authenticate-source -->
          
        </div>

        

        
      </div><!-- authenticate-method -->

    
    </section><!-- public-class-method-details -->
  
     <section id="protected-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Protected Class Methods</h3>

    
      <div id="method-c-sha1" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">sha1</span><span
            class="method-args">(pass)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Apply SHA1 encryption to the supplied password.  We will additionally
surround the password with a salt  for additional security.</p>
          

          
          <div class="method-source-code" id="sha1-source">
            <pre><span class="ruby-comment"># File app/models/user.rb, line 420</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">sha1</span>(<span class="ruby-identifier">pass</span>)
  <span class="ruby-constant">Digest</span><span class="ruby-operator">::</span><span class="ruby-constant">SHA1</span>.<span class="ruby-identifier">hexdigest</span>(<span class="ruby-node">&quot;#{salt}--#{pass}--&quot;</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- sha1-source -->
          
        </div>

        

        
      </div><!-- sha1-method -->

    
    </section><!-- protected-class-method-details -->
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-active_role" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            active_role(role) &rarr; role
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Retrieve the user’s active role.</p>

<pre>Retrieve the user's active role to the role passed in.</pre>
          

          
          <div class="method-source-code" id="active_role-source">
            <pre><span class="ruby-comment"># File app/models/user.rb, line 124</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">active_role</span>
  <span class="ruby-constant">Role</span>.<span class="ruby-identifier">find</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">active_role_id</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- active_role-source -->
          
        </div>

        

        
      </div><!-- active_role-method -->

    
      <div id="method-i-active_role-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">active_role=</span><span
            class="method-args">(role)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Set the user’s active role.</p>

<p>callseq:</p>

<pre>active_role=(role) -&gt; boolean</pre>

<p>Set the user’s active role to the role passed in.</p>
          

          
          <div class="method-source-code" id="active_role-3D-source">
            <pre><span class="ruby-comment"># File app/models/user.rb, line 110</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">active_role=</span>(<span class="ruby-identifier">role</span>)
 <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">active_role_id</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">role</span>.<span class="ruby-identifier">id</span>
   <span class="ruby-keyword">self</span>.<span class="ruby-identifier">password</span>              = <span class="ruby-string">''</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">update_attribute</span>(<span class="ruby-value">:active_role_id</span>, <span class="ruby-identifier">role</span>.<span class="ruby-identifier">id</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- active_role-3D-source -->
          
        </div>

        

        
      </div><!-- active_role-3D-method -->

    
      <div id="method-i-alpha_char" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">alpha_char</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="User.html#method-i-alpha_char">#alpha_char</a></p>

<p>Description: Provides the downcased first character of the user’s last <a
href="User.html#method-i-name">#name</a>.</p>

<p>Return value: The lowercase first character of the user’s last <a
href="User.html#method-i-name">#name</a>.</p>
          

          
          <div class="method-source-code" id="alpha_char-source">
            <pre><span class="ruby-comment"># File app/models/user.rb, line 388</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">alpha_char</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">last_name</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">0</span>].<span class="ruby-identifier">downcase</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- alpha_char-source -->
          
        </div>

        

        
      </div><!-- alpha_char-method -->

    
      <div id="method-i-designer_role" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            designer_role() &rarr; role
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Retrieve the designer role record from the user’s list of roles records.</p>

<pre>Look through the user's list of roles for a designer role record.  
If a designer role record is detected then it is returned.
Otherwise a Nil is returned.</pre>
          

          
          <div class="method-source-code" id="designer_role-source">
            <pre><span class="ruby-comment"># File app/models/user.rb, line 229</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">designer_role</span>
   <span class="ruby-keyword">self</span>.<span class="ruby-identifier">roles</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-string">'Designer'</span>}
 <span class="ruby-keyword">end</span></pre>
          </div><!-- designer_role-source -->
          
        </div>

        

        
      </div><!-- designer_role-method -->

    
      <div id="method-i-has_access-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">has_access?</span><span
            class="method-args">(required_roles)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="User.html#method-i-has_access-3F">#has_access?</a></p>

<p>Description: Indicates that the user has access based on role.</p>

<p>Parameters: required_roles - an array of roles that are permitted access to
the  resource.</p>

<p>Return value: A boolean value that indicates that the user has access to
the  resource if set to TRUE.</p>
          

          
          <div class="method-source-code" id="has_access-3F-source">
            <pre><span class="ruby-comment"># File app/models/user.rb, line 410</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">has_access?</span>(<span class="ruby-identifier">required_roles</span>)
  (<span class="ruby-keyword">self</span>.<span class="ruby-identifier">roles</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">name</span> } &amp; <span class="ruby-identifier">required_roles</span>).<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- has_access-3F-source -->
          
        </div>

        

        
      </div><!-- has_access-3F-method -->

    
      <div id="method-i-is_a_role_member-3F" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            is_a_role_member?() &rarr; boolean
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Indicate if the user is assigned to the role identified by the role <a
href="User.html#method-i-name">#name</a>.</p>

<pre>Returns TRUE if the user is assigned to the role.</pre>
          

          
          <div class="method-source-code" id="is_a_role_member-3F-source">
            <pre><span class="ruby-comment"># File app/models/user.rb, line 149</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">is_a_role_member?</span>(<span class="ruby-identifier">role_name</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">roles</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">role_name</span> } <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- is_a_role_member-3F-source -->
          
        </div>

        

        
      </div><!-- is_a_role_member-3F-method -->

    
      <div id="method-i-is_an_lcr_designer-3F" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            is_an_lcr_designer?() &rarr; boolean
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Indicate if the user is designer from a low cost region.</p>

<pre>Returns TRUE if the user is a designer from a low cost region.</pre>
          

          
          <div class="method-source-code" id="is_an_lcr_designer-3F-source">
            <pre><span class="ruby-comment"># File app/models/user.rb, line 160</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">is_an_lcr_designer?</span>
  <span class="ruby-identifier">designer</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">roles</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-string">'Designer'</span>}
  <span class="ruby-identifier">designer</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-keyword">self</span>.<span class="ruby-identifier">employee?</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- is_an_lcr_designer-3F-source -->
          
        </div>

        

        
      </div><!-- is_an_lcr_designer-3F-method -->

    
      <div id="method-i-is_designer-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">is_designer?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="User.html#method-i-is_designer-3F">#is_designer?</a></p>

<p>Description: Determines if the user is in PCB designer.</p>

<p>Parameters: None</p>

<p>Return value: TRUE if the user is a pcb designer,  Otherwise FALSE.</p>
          

          
          <div class="method-source-code" id="is_designer-3F-source">
            <pre><span class="ruby-comment"># File app/models/user.rb, line 215</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">is_designer?</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">designer_role</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- is_designer-3F-source -->
          
        </div>

        

        
      </div><!-- is_designer-3F-method -->

    
      <div id="method-i-is_manager-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">is_manager?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="User.html#method-i-is_manager-3F">#is_manager?</a></p>

<p>Description: Determines if the user is manager reviewer.</p>

<p>Parameters: None</p>

<p>Return value: TRUE if the user is manager reviewer,  Otherwise FALSE.</p>
          

          
          <div class="method-source-code" id="is_manager-3F-source">
            <pre><span class="ruby-comment"># File app/models/user.rb, line 79</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">is_manager?</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">roles</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">manager?</span> } <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- is_manager-3F-source -->
          
        </div>

        

        
      </div><!-- is_manager-3F-method -->

    
      <div id="method-i-is_pcb_admin-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">is_pcb_admin?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="User.html#method-i-is_pcb_admin-3F">#is_pcb_admin?</a></p>

<p>Description: Determines if the user is a pcb admin.</p>

<p>Parameters: None</p>

<p>Return value: TRUE if the user is a pcb administrator,  Otherwise FALSE.</p>
          

          
          <div class="method-source-code" id="is_pcb_admin-3F-source">
            <pre><span class="ruby-comment"># File app/models/user.rb, line 317</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">is_pcb_admin?</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pcb_admin_role</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- is_pcb_admin-3F-source -->
          
        </div>

        

        
      </div><!-- is_pcb_admin-3F-method -->

    
      <div id="method-i-is_pcb_management-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">is_pcb_management?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="User.html#method-i-is_pcb_management-3F">#is_pcb_management?</a></p>

<p>Description: Determines if the user is in PCB management.</p>

<p>Parameters: None</p>

<p>Return value: TRUE if the user is in pcb management,  Otherwise FALSE.</p>
          

          
          <div class="method-source-code" id="is_pcb_management-3F-source">
            <pre><span class="ruby-comment"># File app/models/user.rb, line 249</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">is_pcb_management?</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pcb_management_role</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- is_pcb_management-3F-source -->
          
        </div>

        

        
      </div><!-- is_pcb_management-3F-method -->

    
      <div id="method-i-is_reviewer-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">is_reviewer?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="User.html#method-i-is_reviewer-3F">#is_reviewer?</a></p>

<p>Description: Determines if the user is a reviewer.</p>

<p>Parameters: None</p>

<p>Return value: TRUE if the user is a reviewer,  Otherwise FALSE.</p>
          

          
          <div class="method-source-code" id="is_reviewer-3F-source">
            <pre><span class="ruby-comment"># File app/models/user.rb, line 99</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">is_reviewer?</span>
   <span class="ruby-keyword">self</span>.<span class="ruby-identifier">reviewer_role</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- is_reviewer-3F-source -->
          
        </div>

        

        
      </div><!-- is_reviewer-3F-method -->

    
      <div id="method-i-is_tracker_admin-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">is_tracker_admin?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="User.html#method-i-is_tracker_admin-3F">#is_tracker_admin?</a></p>

<p>Description: Determines if the user is a tracker administrator.</p>

<p>Parameters: None</p>

<p>Return value: TRUE if the user is a tracker administrator,  Otherwise
FALSE.</p>
          

          
          <div class="method-source-code" id="is_tracker_admin-3F-source">
            <pre><span class="ruby-comment"># File app/models/user.rb, line 283</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">is_tracker_admin?</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">tracker_admin_role</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- is_tracker_admin-3F-source -->
          
        </div>

        

        
      </div><!-- is_tracker_admin-3F-method -->

    
      <div id="method-i-last_name_first" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">last_name_first</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="User.html#method-i-last_name_first">#last_name_first</a></p>

<p>Description: This method returns the user’s <a
href="User.html#method-i-name">#name</a>, last <a
href="User.html#method-i-name">#name</a> first.</p>

<p>Parameters: None</p>

<p>Return value: A string containing the user’s <a
href="User.html#method-i-name">#name</a> (last <a
href="User.html#method-i-name">#name</a> first).</p>
          

          
          <div class="method-source-code" id="last_name_first-source">
            <pre><span class="ruby-comment"># File app/models/user.rb, line 371</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">last_name_first</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">last_name</span> <span class="ruby-operator">+</span> <span class="ruby-string">', '</span> <span class="ruby-operator">+</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">first_name</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- last_name_first-source -->
          
        </div>

        

        
      </div><!-- last_name_first-method -->

    
      <div id="method-i-name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">name</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p><a href="User.html#method-i-name">#name</a></p>

<p>Description: This method returns the user’s <a
href="User.html#method-i-name">#name</a>.</p>

<p>Parameters: None</p>

<p>Return value: A string containing the user’s <a
href="User.html#method-i-name">#name</a> (last <a
href="User.html#method-i-name">#name</a> first).</p>
          

          
          <div class="method-source-code" id="name-source">
            <pre><span class="ruby-comment"># File app/models/user.rb, line 351</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">name</span> 
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">first_name</span> <span class="ruby-operator">+</span> <span class="ruby-string">' '</span> <span class="ruby-operator">+</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">last_name</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- name-source -->
          
        </div>

        

        
      </div><!-- name-method -->

    
      <div id="method-i-pcb_admin_role" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            pcb_admin_role() &rarr; role
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Retrieve the PCB admin role record from the user’s list of roles records.</p>

<pre>Look through the user's list of roles for a PCB admin role record.  
If a PCB admin role record is detected then it is returned.
Otherwise a Nil is returned.</pre>
          

          
          <div class="method-source-code" id="pcb_admin_role-source">
            <pre><span class="ruby-comment"># File app/models/user.rb, line 331</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pcb_admin_role</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">roles</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-string">'PCB Admin'</span> }
<span class="ruby-keyword">end</span></pre>
          </div><!-- pcb_admin_role-source -->
          
        </div>

        

        
      </div><!-- pcb_admin_role-method -->

    
      <div id="method-i-pcb_management_role" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            pcb_management_role() &rarr; role
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Retrieve the PCB management role record from the user’s list of roles
records.</p>

<pre>Look through the user's list of roles for a PCB management role record.  
If a PCB management role record is detected then it is returned.
Otherwise a Nil is returned.</pre>
          

          
          <div class="method-source-code" id="pcb_management_role-source">
            <pre><span class="ruby-comment"># File app/models/user.rb, line 263</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pcb_management_role</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">roles</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-string">'Manager'</span> }
<span class="ruby-keyword">end</span></pre>
          </div><!-- pcb_management_role-source -->
          
        </div>

        

        
      </div><!-- pcb_management_role-method -->

    
      <div id="method-i-reviewer_role" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            reviewer_role() &rarr; role
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Retrieve the first reviewer role record from the user’s list of role
records.</p>

<pre>Look through the user's list of roles for a reviewer role record.  
If a reviewer role record is detected then the it is returned.
Otherwise a Nil is returned.</pre>
          

          
          <div class="method-source-code" id="reviewer_role-source">
            <pre><span class="ruby-comment"># File app/models/user.rb, line 138</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reviewer_role</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">roles</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">reviewer?</span> }
<span class="ruby-keyword">end</span></pre>
          </div><!-- reviewer_role-source -->
          
        </div>

        

        
      </div><!-- reviewer_role-method -->

    
      <div id="method-i-save_division" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            save_division() &rarr; nil
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Update the user’s division</p>

<pre>Updated the user record's division_id field with the new division
id if the division_id passed in does not match the existing 
division_id field.</pre>
          

          
          <div class="method-source-code" id="save_division-source">
            <pre><span class="ruby-comment"># File app/models/user.rb, line 174</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">save_division</span>(<span class="ruby-identifier">division_id</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">division_id</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">division_id</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">password</span>    = <span class="ruby-string">''</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">update_attribute</span>(<span class="ruby-value">:division_id</span>, <span class="ruby-identifier">division_id</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- save_division-source -->
          
        </div>

        

        
      </div><!-- save_division-method -->

    
      <div id="method-i-save_location" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            save_location() &rarr; nil
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Update the user’s location</p>

<pre>Updated the user record's location_id field with the new location
id if the location_id passed in does not match the existing 
location_id field.</pre>
          

          
          <div class="method-source-code" id="save_location-source">
            <pre><span class="ruby-comment"># File app/models/user.rb, line 191</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">save_location</span>(<span class="ruby-identifier">location_id</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">location_id</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">location_id</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">password</span>    = <span class="ruby-string">''</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">update_attribute</span>(<span class="ruby-value">:location_id</span>, <span class="ruby-identifier">location_id</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- save_location-source -->
          
        </div>

        

        
      </div><!-- save_location-method -->

    
      <div id="method-i-tracker_admin_role" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            tracker_admin_role() &rarr; role
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Retrieve the tracker admin role record from the user’s list of roles
records.</p>

<pre>Look through the user's list of roles for a tracker admin role record.  
If a tracker admin role record is detected then it is returned.
Otherwise a Nil is returned.</pre>
          

          
          <div class="method-source-code" id="tracker_admin_role-source">
            <pre><span class="ruby-comment"># File app/models/user.rb, line 297</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">tracker_admin_role</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">roles</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-string">'Admin'</span>}
<span class="ruby-keyword">end</span></pre>
          </div><!-- tracker_admin_role-source -->
          
        </div>

        

        
      </div><!-- tracker_admin_role-method -->

    
    </section><!-- public-instance-method-details -->
  
     <section id="protected-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Protected Instance Methods</h3>

    
      <div id="method-i-crypt_password" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">crypt_password</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Before saving the record to database we will crypt the password  using
SHA1.  We never store the actual password in the DB.</p>
          

          
          <div class="method-source-code" id="crypt_password-source">
            <pre><span class="ruby-comment"># File app/models/user.rb, line 429</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">crypt_password</span>
  <span class="ruby-identifier">write_attribute</span> <span class="ruby-string">&quot;password&quot;</span>, <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">sha1</span>(<span class="ruby-identifier">password</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- crypt_password-source -->
          
        </div>

        

        
      </div><!-- crypt_password-method -->

    
      <div id="method-i-crypt_unless_empty" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">crypt_unless_empty</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>If the record is updated we will check if the password is empty. If its
empty we assume that the user didn’t want to change his password and just
reset it to the old value.</p>
          

          
          <div class="method-source-code" id="crypt_unless_empty-source">
            <pre><span class="ruby-comment"># File app/models/user.rb, line 438</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">crypt_unless_empty</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">password</span>.<span class="ruby-identifier">empty?</span>   
    <span class="ruby-identifier">user</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">find</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">id</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">password</span> = <span class="ruby-identifier">user</span>.<span class="ruby-identifier">password</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">write_attribute</span> <span class="ruby-string">&quot;password&quot;</span>, <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">sha1</span>(<span class="ruby-identifier">password</span>)
  <span class="ruby-keyword">end</span>        
<span class="ruby-keyword">end</span></pre>
          </div><!-- crypt_unless_empty-source -->
          
        </div>

        

        
      </div><!-- crypt_unless_empty-method -->

    
    </section><!-- protected-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.11.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

